(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[185],{8496:function(e,t,s){Promise.resolve().then(s.bind(s,3853))},3853:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return E}});var l=s(7437),r=s(8178),a=s.n(r);s(8877);var i=s(6463),n=s(998),c=s(2265);function d(e){let{children:t}=e,{data:s,status:r}=(0,n.useSession)(),a=(0,i.useRouter)(),d=(0,i.usePathname)(),o=null==d?void 0:d.startsWith("/auth");return((0,c.useEffect)(()=>{},[r,o,a]),"loading"===r)?(0,l.jsx)("div",{className:"flex items-center justify-center min-h-screen bg-black",children:(0,l.jsx)("div",{className:"w-16 h-16 border-t-4 border-green-500 border-solid rounded-full animate-spin"})}):(0,l.jsx)(l.Fragment,{children:t})}function o(e){let{children:t}=e;return(0,l.jsx)(n.SessionProvider,{children:(0,l.jsx)(d,{children:t})})}var u=s(725),x=s(9173),m=s(142);s(8497);var h=s(3308);s(9196),s(6609);var f=s(7138),b=s(7476),j=s(1942),p=s(9824),v=()=>{let e=(0,i.usePathname)();return(0,l.jsx)("nav",{className:"fixed bottom-0 left-0 right-0 bg-neutral-900 border-t border-neutral-700 sm:hidden z-50",children:(0,l.jsxs)("div",{className:"flex justify-around items-center h-16",children:[(0,l.jsxs)(f.default,{href:"/",className:"flex flex-col items-center justify-center flex-1 h-full ".concat("/"===e?"text-white":"text-gray-400"," hover:text-white transition-colors"),children:[(0,l.jsx)(b.m6D,{className:"text-xl mb-0.5"}),(0,l.jsx)("span",{className:"text-xs",children:"Inicio"})]}),(0,l.jsxs)(f.default,{href:"/search",className:"flex flex-col items-center justify-center flex-1 h-full ".concat("/search"===e?"text-white":"text-gray-400"," hover:text-white transition-colors"),children:[(0,l.jsx)(b.jRj,{className:"text-xl mb-0.5"}),(0,l.jsx)("span",{className:"text-xs",children:"Buscar"})]}),(0,l.jsxs)(f.default,{href:"/collection/playlists",className:"flex flex-col items-center justify-center flex-1 h-full ".concat("/collection/playlists"===e?"text-white":"text-gray-400"," hover:text-white transition-colors"),children:[(0,l.jsx)(b.yK7,{className:"text-xl mb-0.5"}),(0,l.jsx)("span",{className:"text-xs",children:"Tu biblioteca"})]}),(0,l.jsxs)(f.default,{href:"/premium",className:"flex flex-col items-center justify-center flex-1 h-full ".concat("/premium"===e?"text-white":"text-gray-400"," hover:text-white transition-colors"),children:[(0,l.jsx)(j.l4C,{className:"text-xl mb-0.5"}),(0,l.jsx)("span",{className:"text-xs",children:"Premium"})]}),(0,l.jsxs)(f.default,{href:"/create-playlist",className:"flex flex-col items-center justify-center flex-1 h-full text-gray-400 hover:text-white transition-colors",children:[(0,l.jsx)("div",{className:"bg-white text-black rounded-full p-1.5 mb-0.5",children:(0,l.jsx)(p.D0w,{className:"text-lg"})}),(0,l.jsx)("span",{className:"text-xs",children:"Crear"})]})]})})},g=s(9980);let w=(0,c.createContext)(void 0),N=e=>{let{children:t}=e,s={...g.c[0],id:"example-1",duration:213,imageUrl:"https://i.scdn.co/image/ab67616d00001e02ff9ca10b55ce82ae553c8228",audioUrl:"https://example.com/audio.mp3",playCount:0},[r,a]=(0,c.useState)(s),[i,n]=(0,c.useState)(!1),[d,o]=(0,c.useState)(.7),[u,x]=(0,c.useState)(0),[m,h]=(0,c.useState)(0),[f,b]=(0,c.useState)([]),[j,p]=(0,c.useState)(-1),v=(0,c.useRef)(null);(0,c.useEffect)(()=>{{v.current=new Audio;let e=v.current,t=()=>{h(e.currentTime)},s=()=>{x(e.duration)},l=()=>{S()};return e.addEventListener("timeupdate",t),e.addEventListener("loadedmetadata",s),e.addEventListener("ended",l),()=>{e.removeEventListener("timeupdate",t),e.removeEventListener("loadedmetadata",s),e.removeEventListener("ended",l),e.pause(),e.src=""}}},[]),(0,c.useEffect)(()=>{v.current&&(v.current.volume=d)},[d]),(0,c.useEffect)(()=>{v.current&&(i?v.current.play().catch(e=>{console.error("Error al reproducir:",e),n(!1)}):v.current.pause())},[i]);let N=e=>{if(v.current){if((null==r?void 0:r.id)===e.id){y();return}if(v.current.pause(),v.current.src=e.audioUrl||"",v.current.load(),a(e),n(!0),f.some(t=>t.id===e.id))p(f.findIndex(t=>t.id===e.id));else{let t=[...f];t.splice(j+1,0,e),b(t),p(j+1)}}},y=()=>{n(!i)},k=e=>{if(!v.current)return;let t=Math.max(0,Math.min(e,u));v.current.currentTime=t,h(t)},S=()=>{if(j<f.length-1){let e=f[j+1];p(j+1),a(e),v.current&&(v.current.src=e.audioUrl||"",v.current.play().catch(console.error))}else n(!1),h(0)};return(0,l.jsxs)(w.Provider,{value:{currentSong:r,isPlaying:i,volume:d,duration:u,currentTime:m,play:N,togglePlayPause:y,setVolume:e=>{o(Math.max(0,Math.min(1,e)))},seek:k,playNext:S,playPrevious:()=>{if(m>3)k(0);else if(j>0){let e=f[j-1];p(j-1),a(e),v.current&&(v.current.src=e.audioUrl||"",v.current.play().catch(console.error))}else k(0)},queue:f,addToQueue:e=>{let t=Array.isArray(e)?e:[e];b(e=>[...e,...t]),!r&&t.length>0&&N(t[0])},clearQueue:()=>{b([]),p(-1)}},children:[t,(0,l.jsx)("audio",{ref:v,className:"hidden"})]})},y=()=>{let e=(0,c.useContext)(w);if(void 0===e)throw Error("usePlayer debe usarse dentro de un PlayerProvider");return e};var k=s(3781);let S=e=>isNaN(e)||!isFinite(e)||e<0?"0:00":"".concat(Math.floor(e/60),":").concat(Math.floor(e%60).toString().padStart(2,"0"));var C=()=>{let{currentSong:e,isPlaying:t,volume:s,duration:r,currentTime:a,togglePlayPause:i,setVolume:n,seek:d,playNext:o,playPrevious:u}=y(),[x,m]=(0,c.useState)(!1),[h,f]=(0,c.useState)(.7),[b,p]=(0,c.useState)(0);(0,c.useEffect)(()=>{r>0?p(a/r*100):p(0)},[a,r]);let v=(0,c.useCallback)(()=>{x?n(h):(f(s),n(0)),m(!x)},[x,h,n,s]),g=e||{id:"default",title:"No hay canci\xf3n seleccionada",artist:"Selecciona una canci\xf3n para reproducir",duration:0,playCount:0};return(0,l.jsx)("div",{className:"fixed bottom-0 left-0 right-0 bg-gradient-to-r from-gray-900/90 to-black/90 backdrop-blur-sm border-t border-gray-800/50 p-2 sm:p-3 z-40 sm:z-50",children:(0,l.jsxs)("div",{className:"container mx-auto",children:[(0,l.jsxs)("div",{className:"flex flex-col sm:hidden pb-16",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between w-full mb-2",children:[(0,l.jsxs)("div",{className:"flex items-center flex-1 min-w-0",children:[(0,l.jsx)("div",{className:"h-12 w-12 bg-gray-800 rounded overflow-hidden mr-3 flex-shrink-0",children:g.imageUrl?(0,l.jsx)("img",{src:g.imageUrl,alt:g.title,className:"w-full h-full object-cover"}):(0,l.jsx)("div",{className:"w-full h-full bg-gradient-to-br from-purple-600 to-blue-500 flex items-center justify-center",children:(0,l.jsx)("span",{className:"text-white text-xs",children:g.title.charAt(0).toUpperCase()})})}),(0,l.jsxs)("div",{className:"overflow-hidden",children:[(0,l.jsx)("h4",{className:"text-white font-medium text-sm truncate",children:g.title}),(0,l.jsx)("p",{className:"text-gray-400 text-xs truncate",children:g.artist})]})]}),(0,l.jsx)("button",{onClick:i,className:"ml-2 bg-white text-black rounded-full w-10 h-10 flex items-center justify-center hover:scale-105 transform transition-transform flex-shrink-0","aria-label":t?"Pausar":"Reproducir",children:t?(0,l.jsx)(j.Wh,{size:14}):(0,l.jsx)(j.gmG,{size:14,className:"ml-0.5"})})]}),(0,l.jsx)("div",{className:"w-full h-1.5 bg-gray-700 rounded-full cursor-pointer",onClick:e=>{let t=e.currentTarget.getBoundingClientRect();d((e.clientX-t.left)/t.width*r)},children:(0,l.jsx)("div",{className:"h-full bg-green-500 rounded-full",style:{width:"".concat(b,"%")}})})]}),(0,l.jsxs)("div",{className:"hidden sm:flex items-center",children:[(0,l.jsxs)("div",{className:"flex items-center w-1/4",children:[(0,l.jsx)("div",{className:"h-14 w-14 bg-gray-800 rounded-md overflow-hidden mr-3 flex-shrink-0",children:g.imageUrl?(0,l.jsx)("img",{src:g.imageUrl,alt:g.title,className:"w-full h-full object-cover"}):(0,l.jsx)("div",{className:"w-full h-full bg-gradient-to-br from-purple-600 to-blue-500 flex items-center justify-center",children:(0,l.jsx)("span",{className:"text-white text-xs",children:g.title.charAt(0).toUpperCase()})})}),(0,l.jsxs)("div",{className:"overflow-hidden",children:[(0,l.jsx)("h4",{className:"text-white font-medium text-sm truncate",children:g.title}),(0,l.jsx)("p",{className:"text-gray-400 text-xs truncate",children:g.artist})]}),(0,l.jsx)("button",{className:"ml-4 text-gray-400 hover:text-white",children:(0,l.jsx)(k.evw,{size:20})})]}),(0,l.jsxs)("div",{className:"flex flex-col items-center w-2/4",children:[(0,l.jsxs)("div",{className:"flex items-center space-x-4 mb-2",children:[(0,l.jsx)("button",{onClick:u,className:"text-gray-300 hover:text-white transition-colors","aria-label":"Canci\xf3n anterior",children:(0,l.jsx)(j.qSR,{})}),(0,l.jsx)("button",{onClick:i,className:"bg-white text-black rounded-full w-8 h-8 flex items-center justify-center hover:scale-105 transform transition-transform","aria-label":t?"Pausar":"Reproducir",children:t?(0,l.jsx)(j.Wh,{size:12}):(0,l.jsx)(j.gmG,{size:12,className:"ml-0.5"})}),(0,l.jsx)("button",{onClick:o,className:"text-gray-300 hover:text-white transition-colors","aria-label":"Siguiente canci\xf3n",children:(0,l.jsx)(j.Nqc,{})})]}),(0,l.jsxs)("div",{className:"w-full flex items-center space-x-2",children:[(0,l.jsx)("span",{className:"text-xs text-gray-400 w-10 text-right",children:S(a)}),(0,l.jsx)("div",{className:"flex-1 h-1 bg-gray-700 rounded-full overflow-hidden",children:(0,l.jsx)("input",{type:"range",min:"0",max:"100",value:b||0,onChange:e=>{d(parseFloat(e.target.value)/100*r)},className:"w-full h-full appearance-none bg-transparent [&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:h-3 [&::-webkit-slider-thumb]:w-3 [&::-webkit-slider-thumb]:rounded-full [&::-webkit-slider-thumb]:bg-white [&::-webkit-slider-thumb]:cursor-pointer [&::-webkit-slider-thumb]:opacity-0 [&::-webkit-slider-thumb]:hover:opacity-100 [&::-webkit-slider-thumb]:transition-opacity",style:{background:"linear-gradient(to right, #1DB954 0%, #1DB954 ".concat(b,"%, #4D4D4D ").concat(b,"%, #4D4D4D 100%)")}})}),(0,l.jsx)("span",{className:"text-xs text-gray-400 w-10",children:S(r)})]})]}),(0,l.jsxs)("div",{className:"hidden sm:flex items-center justify-end w-1/4 space-x-2",children:[(0,l.jsx)("button",{onClick:v,className:"text-gray-300 hover:text-white transition-colors","aria-label":x?"Activar sonido":"Silenciar",children:x||0===s?(0,l.jsx)(j.xZH,{}):(0,l.jsx)(j.rxG,{})}),(0,l.jsx)("div",{className:"w-20 sm:w-24 h-1 bg-gray-700 rounded-full overflow-hidden",children:(0,l.jsx)("input",{type:"range",min:"0",max:"1",step:"0.01",value:x?0:s,onChange:e=>{let t=parseFloat(e.target.value);n(t),m(0===t),f(t)},className:"w-full h-full appearance-none bg-transparent [&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:h-3 [&::-webkit-slider-thumb]:w-3 [&::-webkit-slider-thumb]:rounded-full [&::-webkit-slider-thumb]:bg-white [&::-webkit-slider-thumb]:cursor-pointer",style:{background:"linear-gradient(to right, #1DB954 0%, #1DB954 ".concat((x?0:s)*100,"%, #4D4D4D ").concat((x?0:s)*100,"%, #4D4D4D 100%)")}})})]})]})]})})};let D=(0,c.memo)(function(e){let{children:t}=e,[s,r]=(0,c.useState)(!1),{status:a}=(0,n.useSession)({required:!1}),d=(0,i.usePathname)(),o=null==d?void 0:d.startsWith("/auth"),f="authenticated"===a;return((0,c.useEffect)(()=>{r(f)},[f]),o)?(0,l.jsx)(l.Fragment,{children:t}):(0,l.jsx)(N,{children:(0,l.jsxs)("div",{className:"flex flex-col min-h-0 min-w-0 h-full w-full overflow-hidden",children:[(0,l.jsx)("div",{className:"z-50 relative",children:(0,l.jsx)(x.default,{})}),(0,l.jsxs)("div",{className:"flex flex-1 min-h-0 min-w-0 overflow-hidden relative",children:[(0,l.jsx)("div",{className:"hidden md:flex h-full",children:(0,l.jsx)(u.default,{})}),(0,l.jsx)("main",{className:"min-h-0 min-w-0 overflow-y-auto custom-scrollbar flex-1 px-1 md:px-2 pt-1 md:pt-1.5 pb-32 sm:pb-24 backdrop-blur-md bg-black/70 ".concat(s?"lg:mr-64 xl:mr-80":""),style:{width:"100%",maxWidth:"100%",paddingBottom:"8rem"},children:(0,l.jsx)("div",{className:"min-h-[calc(100vh-10rem)]",children:t})}),f&&s&&(0,l.jsx)("div",{className:"hidden lg:flex fixed top-0 right-0 h-full w-64 lg:w-72 xl:w-80 bg-neutral-900/80 backdrop-blur-md z-40 overflow-y-auto transform transition-all duration-300 ease-in-out",style:{paddingTop:"64px",boxShadow:"-4px 0 10px rgba(0, 0, 0, 0.3)"},children:(0,l.jsx)(m.default,{})})]}),f?(0,l.jsx)("div",{className:"fixed bottom-16 left-0 right-0 z-40 sm:bottom-0 sm:pb-0",children:(0,l.jsx)(C,{})}):(0,l.jsx)("div",{className:"fixed bottom-0 left-0 right-0 z-40",children:(0,l.jsx)(h.default,{})}),f&&(0,l.jsx)(v,{})]})})});function E(e){let{children:t}=e;return(0,l.jsx)("html",{lang:"en",className:a().className,children:(0,l.jsx)("body",{className:a().className+" bg-black",children:(0,l.jsx)(o,{children:(0,l.jsx)(D,{children:t})})})})}D.displayName="AuthenticatedLayout"},8877:function(){},8178:function(e){e.exports={style:{fontFamily:"'__Figtree_2ca027', '__Figtree_Fallback_2ca027'",fontStyle:"normal"},className:"__className_2ca027"}}},function(e){e.O(0,[318,699,956,779,522,706,614,675,452,25,138,480,497,882,971,23,744],function(){return e(e.s=8496)}),_N_E=e.O()}]);