(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[111],{7109:function(e,r,a){Promise.resolve().then(a.bind(a,5358))},5358:function(e,r,a){"use strict";a.d(r,{default:function(){return i}});var s=a(7437),t=a(2265),n=a(6463),o=a(1942),l=a(8726),c=a(2847);function i(){let e=(0,n.useRouter)(),[r,a]=(0,t.useState)(!1),[i,d]=(0,t.useState)(!1),[u,m]=(0,t.useState)(null),[x,h]=(0,t.useState)({current:!1,new:!1,confirm:!1}),[f,b]=(0,t.useState)({currentPassword:"",newPassword:"",confirmPassword:""});(0,t.useEffect)(()=>{m(null)},[f]);let g=e=>{let{name:r,value:a}=e.target;b(e=>({...e,[r]:a}))},w=e=>{h(r=>({...r,[e]:!r[e]}))},p=e=>x[e]?"text":"password",y=()=>f.currentPassword?f.newPassword.length<8?(m("La nueva contrase\xf1a debe tener al menos 8 caracteres"),!1):f.newPassword===f.confirmPassword||(m("Las contrase\xf1as no coinciden"),!1):(m("Por favor ingresa tu contrase\xf1a actual"),!1),j=async e=>{if(e.preventDefault(),y())try{a(!0),m(null);let e=await fetch("/api/auth/change-password",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({currentPassword:f.currentPassword,newPassword:f.newPassword})}),r=await e.json();if(!e.ok)throw Error(r.error||"Error al cambiar la contrase\xf1a");d(!0),b({currentPassword:"",newPassword:"",confirmPassword:""})}catch(r){console.error("Error al cambiar la contrase\xf1a:",r);let e=r instanceof Error?r.message:"Error al cambiar la contrase\xf1a";m(e),l.Am.error(e,{duration:5e3})}finally{a(!1)}},N=()=>{d(!1),e.push("/account")};return(0,s.jsxs)("div",{className:"max-w-2xl mx-auto p-6 bg-gradient-to-b from-gray-900 to-black rounded-xl shadow-2xl relative",children:[(0,s.jsxs)("div",{className:"mb-8",children:[(0,s.jsxs)("button",{onClick:()=>e.back(),className:"flex items-center text-gray-400 hover:text-white transition-colors mb-6",children:[(0,s.jsx)(o.x_l,{className:"mr-2"}),"Volver"]}),(0,s.jsxs)("div",{className:"flex items-center mb-6",children:[(0,s.jsx)("div",{className:"p-3 bg-green-900/30 rounded-full mr-4",children:(0,s.jsx)(o.kUi,{className:"text-green-400 text-xl"})}),(0,s.jsx)("h1",{className:"text-2xl font-bold text-white",children:"Cambiar contrase\xf1a"})]}),(0,s.jsx)("p",{className:"text-gray-400 text-sm",children:"Ingresa tu contrase\xf1a actual y la nueva contrase\xf1a que deseas establecer."})]}),(0,s.jsxs)("form",{onSubmit:j,className:"space-y-6",children:[(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("label",{htmlFor:"currentPassword",className:"text-sm font-medium text-gray-400 block",children:"Contrase\xf1a actual"}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("input",{type:p("current"),id:"currentPassword",name:"currentPassword",value:f.currentPassword,onChange:g,className:"w-full px-4 py-3 bg-gray-800 border border-gray-700 rounded-lg text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all pr-10",placeholder:"••••••••",required:!0}),(0,s.jsx)("button",{type:"button",onClick:()=>w("current"),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-white focus:outline-none","aria-label":x.current?"Ocultar contrase\xf1a":"Mostrar contrase\xf1a",children:x.current?(0,s.jsx)(o.tgn,{}):(0,s.jsx)(o.dSq,{})})]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("label",{htmlFor:"newPassword",className:"text-sm font-medium text-gray-400 block",children:"Nueva contrase\xf1a"}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("input",{type:p("new"),id:"newPassword",name:"newPassword",value:f.newPassword,onChange:g,className:"w-full px-4 py-3 bg-gray-800 border border-gray-700 rounded-lg text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all pr-10",placeholder:"••••••••",minLength:8,required:!0}),(0,s.jsx)("button",{type:"button",onClick:()=>w("new"),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-white focus:outline-none","aria-label":x.new?"Ocultar contrase\xf1a":"Mostrar contrase\xf1a",children:x.new?(0,s.jsx)(o.tgn,{}):(0,s.jsx)(o.dSq,{})})]}),(0,s.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"M\xednimo 8 caracteres"})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("label",{htmlFor:"confirmPassword",className:"text-sm font-medium text-gray-400 block",children:"Confirmar nueva contrase\xf1a"}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("input",{type:p("confirm"),id:"confirmPassword",name:"confirmPassword",value:f.confirmPassword,onChange:g,className:"w-full px-4 py-3 bg-gray-800 border border-gray-700 rounded-lg text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all pr-10",placeholder:"••••••••",minLength:8,required:!0}),(0,s.jsx)("button",{type:"button",onClick:()=>w("confirm"),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-white focus:outline-none","aria-label":x.confirm?"Ocultar contrase\xf1a":"Mostrar contrase\xf1a",children:x.confirm?(0,s.jsx)(o.tgn,{}):(0,s.jsx)(o.dSq,{})})]})]})]}),(0,s.jsx)("div",{className:"pt-2",children:(0,s.jsx)("button",{type:"submit",disabled:r,className:"w-full py-3 px-6 bg-green-600 hover:bg-green-700 text-white font-medium rounded-full transition-all duration-200 flex items-center justify-center ".concat(r?"opacity-70 cursor-not-allowed":""),children:r?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,s.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,s.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Actualizando..."]}):"Cambiar contrase\xf1a"})})]}),(0,s.jsx)(c.u,{isOpen:i,onClose:N,closeOnClickOutside:!1,children:(0,s.jsxs)("div",{className:"text-center p-6",children:[(0,s.jsx)("div",{className:"flex justify-center mb-4",children:(0,s.jsx)("div",{className:"bg-green-100 p-3 rounded-full",children:(0,s.jsx)(o.FJM,{className:"text-green-500 text-4xl"})})}),(0,s.jsx)("h3",{className:"text-xl font-bold text-white mb-2",children:"\xa1Contrase\xf1a actualizada!"}),(0,s.jsx)("p",{className:"text-gray-300 mb-6",children:"Tu contrase\xf1a ha sido cambiada exitosamente."}),(0,s.jsx)("button",{onClick:N,className:"w-full py-2 px-4 bg-green-600 hover:bg-green-700 text-white font-medium rounded-full transition-colors",children:"Aceptar"})]})}),u&&(0,s.jsxs)("div",{className:"mt-4 p-4 bg-red-900/30 border border-red-700 rounded-lg flex items-start",children:[(0,s.jsx)(o.gJy,{className:"text-red-400 mt-0.5 mr-3 flex-shrink-0"}),(0,s.jsx)("span",{className:"text-red-200 text-sm",children:u})]})]})}},2847:function(e,r,a){"use strict";a.d(r,{u:function(){return o}});var s=a(7437),t=a(2265),n=a(4887);function o(e){let{isOpen:r,onClose:a,children:o,title:l,closeOnClickOutside:c=!0}=e;return((0,t.useEffect)(()=>(r?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[r]),r)?(0,n.createPortal)((0,s.jsx)("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:e=>{e.target===e.currentTarget&&c&&a()},children:(0,s.jsxs)("div",{className:"bg-gray-800 rounded-2xl w-full max-w-md overflow-hidden shadow-2xl border border-gray-700",children:[l&&(0,s.jsx)("div",{className:"px-6 py-4 border-b border-gray-700",children:(0,s.jsx)("h3",{className:"text-xl font-bold text-white",children:l})}),(0,s.jsx)("div",{className:"p-6",children:o})]})}),document.body):null}}},function(e){e.O(0,[699,771,971,23,744],function(){return e(e.s=7109)}),_N_E=e.O()}]);