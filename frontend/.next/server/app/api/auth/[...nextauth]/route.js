"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/auth/[...nextauth]/route";
exports.ids = ["app/api/auth/[...nextauth]/route"];
exports.modules = {

/***/ "mongodb":
/*!**************************!*\
  !*** external "mongodb" ***!
  \**************************/
/***/ ((module) => {

module.exports = require("mongodb");

/***/ }),

/***/ "../../client/components/action-async-storage.external":
/*!*******************************************************************************!*\
  !*** external "next/dist/client/components/action-async-storage.external.js" ***!
  \*******************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/client/components/action-async-storage.external.js");

/***/ }),

/***/ "../../client/components/request-async-storage.external":
/*!********************************************************************************!*\
  !*** external "next/dist/client/components/request-async-storage.external.js" ***!
  \********************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/client/components/request-async-storage.external.js");

/***/ }),

/***/ "../../client/components/static-generation-async-storage.external":
/*!******************************************************************************************!*\
  !*** external "next/dist/client/components/static-generation-async-storage.external.js" ***!
  \******************************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/client/components/static-generation-async-storage.external.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "assert":
/*!*************************!*\
  !*** external "assert" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("assert");

/***/ }),

/***/ "buffer":
/*!*************************!*\
  !*** external "buffer" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("buffer");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("crypto");

/***/ }),

/***/ "events":
/*!*************************!*\
  !*** external "events" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("events");

/***/ }),

/***/ "http":
/*!***********************!*\
  !*** external "http" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("http");

/***/ }),

/***/ "https":
/*!************************!*\
  !*** external "https" ***!
  \************************/
/***/ ((module) => {

module.exports = require("https");

/***/ }),

/***/ "querystring":
/*!******************************!*\
  !*** external "querystring" ***!
  \******************************/
/***/ ((module) => {

module.exports = require("querystring");

/***/ }),

/***/ "url":
/*!**********************!*\
  !*** external "url" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("url");

/***/ }),

/***/ "util":
/*!***********************!*\
  !*** external "util" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("util");

/***/ }),

/***/ "zlib":
/*!***********************!*\
  !*** external "zlib" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("zlib");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fauth%2F%5B...nextauth%5D%2Froute&page=%2Fapi%2Fauth%2F%5B...nextauth%5D%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fauth%2F%5B...nextauth%5D%2Froute.ts&appDir=%2FUsers%2Fmikeblackhat%2FSpotify-clone%20v06%2Ffrontend%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fmikeblackhat%2FSpotify-clone%20v06%2Ffrontend&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fauth%2F%5B...nextauth%5D%2Froute&page=%2Fapi%2Fauth%2F%5B...nextauth%5D%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fauth%2F%5B...nextauth%5D%2Froute.ts&appDir=%2FUsers%2Fmikeblackhat%2FSpotify-clone%20v06%2Ffrontend%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fmikeblackhat%2FSpotify-clone%20v06%2Ffrontend&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _Users_mikeblackhat_Spotify_clone_v06_frontend_app_api_auth_nextauth_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/auth/[...nextauth]/route.ts */ \"(rsc)/./app/api/auth/[...nextauth]/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/auth/[...nextauth]/route\",\n        pathname: \"/api/auth/[...nextauth]\",\n        filename: \"route\",\n        bundlePath: \"app/api/auth/[...nextauth]/route\"\n    },\n    resolvedPagePath: \"/Users/mikeblackhat/Spotify-clone v06/frontend/app/api/auth/[...nextauth]/route.ts\",\n    nextConfigOutput,\n    userland: _Users_mikeblackhat_Spotify_clone_v06_frontend_app_api_auth_nextauth_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/auth/[...nextauth]/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZhdXRoJTJGJTVCLi4ubmV4dGF1dGglNUQlMkZyb3V0ZSZwYWdlPSUyRmFwaSUyRmF1dGglMkYlNUIuLi5uZXh0YXV0aCU1RCUyRnJvdXRlJmFwcFBhdGhzPSZwYWdlUGF0aD1wcml2YXRlLW5leHQtYXBwLWRpciUyRmFwaSUyRmF1dGglMkYlNUIuLi5uZXh0YXV0aCU1RCUyRnJvdXRlLnRzJmFwcERpcj0lMkZVc2VycyUyRm1pa2VibGFja2hhdCUyRlNwb3RpZnktY2xvbmUlMjB2MDYlMkZmcm9udGVuZCUyRmFwcCZwYWdlRXh0ZW5zaW9ucz10c3gmcGFnZUV4dGVuc2lvbnM9dHMmcGFnZUV4dGVuc2lvbnM9anN4JnBhZ2VFeHRlbnNpb25zPWpzJnJvb3REaXI9JTJGVXNlcnMlMkZtaWtlYmxhY2toYXQlMkZTcG90aWZ5LWNsb25lJTIwdjA2JTJGZnJvbnRlbmQmaXNEZXY9dHJ1ZSZ0c2NvbmZpZ1BhdGg9dHNjb25maWcuanNvbiZiYXNlUGF0aD0mYXNzZXRQcmVmaXg9Jm5leHRDb25maWdPdXRwdXQ9JnByZWZlcnJlZFJlZ2lvbj0mbWlkZGxld2FyZUNvbmZpZz1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7OztBQUFzRztBQUN2QztBQUNjO0FBQ2tDO0FBQy9HO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixnSEFBbUI7QUFDM0M7QUFDQSxjQUFjLHlFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxZQUFZO0FBQ1osQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBLFFBQVEsaUVBQWlFO0FBQ3pFO0FBQ0E7QUFDQSxXQUFXLDRFQUFXO0FBQ3RCO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDdUg7O0FBRXZIIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vc3BvdGlmeS1jbG9uZS8/MDc4NiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBBcHBSb3V0ZVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLW1vZHVsZXMvYXBwLXJvdXRlL21vZHVsZS5jb21waWxlZFwiO1xuaW1wb3J0IHsgUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLWtpbmRcIjtcbmltcG9ydCB7IHBhdGNoRmV0Y2ggYXMgX3BhdGNoRmV0Y2ggfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9saWIvcGF0Y2gtZmV0Y2hcIjtcbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCIvVXNlcnMvbWlrZWJsYWNraGF0L1Nwb3RpZnktY2xvbmUgdjA2L2Zyb250ZW5kL2FwcC9hcGkvYXV0aC9bLi4ubmV4dGF1dGhdL3JvdXRlLnRzXCI7XG4vLyBXZSBpbmplY3QgdGhlIG5leHRDb25maWdPdXRwdXQgaGVyZSBzbyB0aGF0IHdlIGNhbiB1c2UgdGhlbSBpbiB0aGUgcm91dGVcbi8vIG1vZHVsZS5cbmNvbnN0IG5leHRDb25maWdPdXRwdXQgPSBcIlwiXG5jb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBBcHBSb3V0ZVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5BUFBfUk9VVEUsXG4gICAgICAgIHBhZ2U6IFwiL2FwaS9hdXRoL1suLi5uZXh0YXV0aF0vcm91dGVcIixcbiAgICAgICAgcGF0aG5hbWU6IFwiL2FwaS9hdXRoL1suLi5uZXh0YXV0aF1cIixcbiAgICAgICAgZmlsZW5hbWU6IFwicm91dGVcIixcbiAgICAgICAgYnVuZGxlUGF0aDogXCJhcHAvYXBpL2F1dGgvWy4uLm5leHRhdXRoXS9yb3V0ZVwiXG4gICAgfSxcbiAgICByZXNvbHZlZFBhZ2VQYXRoOiBcIi9Vc2Vycy9taWtlYmxhY2toYXQvU3BvdGlmeS1jbG9uZSB2MDYvZnJvbnRlbmQvYXBwL2FwaS9hdXRoL1suLi5uZXh0YXV0aF0vcm91dGUudHNcIixcbiAgICBuZXh0Q29uZmlnT3V0cHV0LFxuICAgIHVzZXJsYW5kXG59KTtcbi8vIFB1bGwgb3V0IHRoZSBleHBvcnRzIHRoYXQgd2UgbmVlZCB0byBleHBvc2UgZnJvbSB0aGUgbW9kdWxlLiBUaGlzIHNob3VsZFxuLy8gYmUgZWxpbWluYXRlZCB3aGVuIHdlJ3ZlIG1vdmVkIHRoZSBvdGhlciByb3V0ZXMgdG8gdGhlIG5ldyBmb3JtYXQuIFRoZXNlXG4vLyBhcmUgdXNlZCB0byBob29rIGludG8gdGhlIHJvdXRlLlxuY29uc3QgeyByZXF1ZXN0QXN5bmNTdG9yYWdlLCBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcyB9ID0gcm91dGVNb2R1bGU7XG5jb25zdCBvcmlnaW5hbFBhdGhuYW1lID0gXCIvYXBpL2F1dGgvWy4uLm5leHRhdXRoXS9yb3V0ZVwiO1xuZnVuY3Rpb24gcGF0Y2hGZXRjaCgpIHtcbiAgICByZXR1cm4gX3BhdGNoRmV0Y2goe1xuICAgICAgICBzZXJ2ZXJIb29rcyxcbiAgICAgICAgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZVxuICAgIH0pO1xufVxuZXhwb3J0IHsgcm91dGVNb2R1bGUsIHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzLCBvcmlnaW5hbFBhdGhuYW1lLCBwYXRjaEZldGNoLCAgfTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YXBwLXJvdXRlLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fauth%2F%5B...nextauth%5D%2Froute&page=%2Fapi%2Fauth%2F%5B...nextauth%5D%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fauth%2F%5B...nextauth%5D%2Froute.ts&appDir=%2FUsers%2Fmikeblackhat%2FSpotify-clone%20v06%2Ffrontend%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fmikeblackhat%2FSpotify-clone%20v06%2Ffrontend&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./app/api/auth/[...nextauth]/auth-options.ts":
/*!****************************************************!*\
  !*** ./app/api/auth/[...nextauth]/auth-options.ts ***!
  \****************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   authOptions: () => (/* binding */ authOptions)\n/* harmony export */ });\n/* harmony import */ var _auth_mongodb_adapter__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @auth/mongodb-adapter */ \"(rsc)/./node_modules/@auth/mongodb-adapter/index.js\");\n/* harmony import */ var next_auth_providers_credentials__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next-auth/providers/credentials */ \"(rsc)/./node_modules/next-auth/providers/credentials.js\");\n/* harmony import */ var next_auth_providers_google__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next-auth/providers/google */ \"(rsc)/./node_modules/next-auth/providers/google.js\");\n/* harmony import */ var _lib_mongodb__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/lib/mongodb */ \"(rsc)/./lib/mongodb.ts\");\n/* harmony import */ var bcryptjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! bcryptjs */ \"(rsc)/./node_modules/bcryptjs/index.js\");\n\n\n\n\n\n// Configuración de autenticación\nconst authOptions = {\n    // Configure one or more authentication providers\n    providers: [\n        (0,next_auth_providers_google__WEBPACK_IMPORTED_MODULE_2__[\"default\"])({\n            clientId: process.env.GOOGLE_CLIENT_ID || \"\",\n            clientSecret: process.env.GOOGLE_CLIENT_SECRET || \"\",\n            allowDangerousEmailAccountLinking: true\n        }),\n        (0,next_auth_providers_credentials__WEBPACK_IMPORTED_MODULE_1__[\"default\"])({\n            id: \"credentials\",\n            name: \"Credentials\",\n            credentials: {\n                email: {\n                    label: \"Email\",\n                    type: \"email\"\n                },\n                password: {\n                    label: \"Password\",\n                    type: \"password\"\n                }\n            },\n            async authorize (credentials) {\n                if (!credentials?.email || !credentials?.password) {\n                    throw new Error(\"Por favor ingresa tu correo y contrase\\xf1a\");\n                }\n                const { email, password } = credentials;\n                try {\n                    const client = await _lib_mongodb__WEBPACK_IMPORTED_MODULE_3__[\"default\"];\n                    const db = client.db();\n                    const user = await db.collection(\"users\").findOne({\n                        email: credentials.email\n                    });\n                    if (!user) {\n                        throw new Error(\"No existe un usuario con este correo\");\n                    }\n                    const userPassword = user.password;\n                    if (typeof userPassword !== \"string\") {\n                        throw new Error(\"Contrase\\xf1a no v\\xe1lida\");\n                    }\n                    // Asegurarse de que la contraseña sea una cadena\n                    const passwordToCompare = userPassword.toString();\n                    const passwordToCheck = credentials.password.toString();\n                    // Usar la versión con promesas de bcrypt\n                    let isPasswordValid = false;\n                    try {\n                        isPasswordValid = await bcryptjs__WEBPACK_IMPORTED_MODULE_4__[\"default\"].compare(passwordToCheck, passwordToCompare);\n                    } catch (err) {\n                        console.error(\"Error al comparar contrase\\xf1as:\", err);\n                        throw new Error(\"Error al verificar la contrase\\xf1a\");\n                    }\n                    if (!isPasswordValid) {\n                        throw new Error(\"Contrase\\xf1a incorrecta\");\n                    }\n                    // Return user object without the password\n                    const { password, ...userWithoutPassword } = user;\n                    return {\n                        id: user._id.toString(),\n                        email: user.email,\n                        name: user.name,\n                        image: user.image\n                    };\n                } catch (error) {\n                    console.error(\"Error during authorization:\", error);\n                    throw error;\n                }\n            }\n        })\n    ],\n    // Configuración del adaptador de MongoDB para NextAuth v4 con manejo personalizado\n    adapter: {\n        ...(0,_auth_mongodb_adapter__WEBPACK_IMPORTED_MODULE_0__.MongoDBAdapter)(_lib_mongodb__WEBPACK_IMPORTED_MODULE_3__[\"default\"], {\n            databaseName: process.env.MONGODB_DB\n        }),\n        // Sobrescribir el método createUser para manejar el campo username\n        async createUser (user) {\n            const client = await _lib_mongodb__WEBPACK_IMPORTED_MODULE_3__[\"default\"];\n            const db = client.db();\n            // Generar un nombre de usuario único basado en el email\n            const baseUsername = user.email?.split(\"@\")[0] || `user${Date.now()}`;\n            let username = baseUsername;\n            let counter = 1;\n            // Verificar si el nombre de usuario ya existe\n            while(await db.collection(\"users\").findOne({\n                username\n            })){\n                username = `${baseUsername}${counter}`;\n                counter++;\n            }\n            // Crear el usuario con un nombre de usuario único\n            const newUser = {\n                ...user,\n                username,\n                plan: \"free\",\n                provider: \"google\",\n                emailVerified: user.emailVerified || new Date(),\n                createdAt: new Date(),\n                updatedAt: new Date()\n            };\n            const result = await db.collection(\"users\").insertOne(newUser);\n            return {\n                ...newUser,\n                id: result.insertedId.toString()\n            };\n        }\n    },\n    // Session configuration\n    session: {\n        strategy: \"jwt\"\n    },\n    // JWT configuration\n    jwt: {\n        maxAge: 30 * 24 * 60 * 60\n    },\n    secret: \"BT+U6h3U0dzZRfcmFcTBgSLpg3fMDD0QX680SmuhKCY=\",\n    // Pages configuration\n    pages: {\n        signIn: \"/auth/signin\",\n        error: \"/auth/signin\"\n    },\n    // Enable debug messages in the console if you are having problems\n    debug: \"development\" === \"development\",\n    // Eventos\n    events: {\n        async createUser ({ user, account, profile, isNewUser }) {\n            // Este evento ya no es necesario ya que manejamos la creación en el callback de signIn\n            // Se mantiene por compatibilidad pero no hace nada\n            return;\n        },\n        async signIn ({ user, account, profile, isNewUser }) {\n            // Este callback se ejecuta después de un inicio de sesión exitoso\n            if (isNewUser && account?.provider) {\n                console.log(`Nuevo usuario creado con ${account.provider}`);\n            }\n            return true;\n        },\n        async error (error) {\n            console.error(\"Error de autenticaci\\xf3n:\", error);\n        }\n    },\n    // Callbacks\n    callbacks: {\n        async signIn ({ user, account, profile, email, credentials }) {\n            // Si es una solicitud de verificación de correo, permitir\n            if (email?.verificationRequest) return true;\n            // Si no es un proveedor OAuth, permitir (manejado por el adaptador)\n            if (!account?.provider || account.provider === \"credentials\") return true;\n            try {\n                // Solo procesar para proveedores OAuth\n                if (account?.provider && account.provider !== \"credentials\") {\n                    const client = await _lib_mongodb__WEBPACK_IMPORTED_MODULE_3__[\"default\"];\n                    const db = client.db();\n                    // Verificar si el usuario ya existe\n                    const existingUser = await db.collection(\"users\").findOne({\n                        email: user.email\n                    });\n                    if (existingUser) {\n                        // Actualizar la información del usuario existente\n                        await db.collection(\"users\").updateOne({\n                            email: user.email\n                        }, {\n                            $set: {\n                                name: user.name,\n                                image: profile?.picture || user.image,\n                                provider: account.provider,\n                                updatedAt: new Date()\n                            }\n                        });\n                    } else {\n                        // Crear un nuevo usuario si no existe\n                        await db.collection(\"users\").insertOne({\n                            email: user.email,\n                            name: user.name,\n                            image: profile?.picture || user.image,\n                            emailVerified: new Date(),\n                            plan: \"free\",\n                            provider: account.provider,\n                            createdAt: new Date(),\n                            updatedAt: new Date()\n                        });\n                    }\n                }\n                return true;\n            } catch (error) {\n                console.error(\"Error en el callback de signIn:\", error);\n                return false;\n            }\n        },\n        async jwt ({ token, user, account }) {\n            // Pasar el ID de usuario al token\n            if (user) {\n                token.id = user.id;\n                token.provider = account?.provider;\n            }\n            return token;\n        },\n        async session ({ session, token, user }) {\n            try {\n                // Verificar que exista el usuario en la sesión y tenga email\n                if (!session?.user?.email) {\n                    console.warn(\"No se encontr\\xf3 el correo electr\\xf3nico en la sesi\\xf3n\");\n                    return session;\n                }\n                const client = await _lib_mongodb__WEBPACK_IMPORTED_MODULE_3__[\"default\"];\n                const db = client.db(process.env.MONGODB_DB || \"\");\n                // Normalizar el correo electrónico a minúsculas\n                const email = session.user.email.toLowerCase();\n                // Buscar el usuario por email en la colección de usuarios\n                const dbUser = await db.collection(\"users\").findOne({\n                    email\n                });\n                if (!dbUser) {\n                    console.warn(`Usuario con email ${email} no encontrado en la base de datos`);\n                    return session;\n                }\n                // Asegurarse de que el ID sea una cadena\n                const userId = dbUser._id?.toString() || token.id || user?.id || \"\";\n                // Actualizar la información del usuario en la sesión\n                if (session.user) {\n                    session.user.id = userId;\n                    // Si el usuario no tiene plan, establecer uno por defecto\n                    if (dbUser.plan === undefined || dbUser.plan === null) {\n                        const defaultPlan = \"free\";\n                        await db.collection(\"users\").updateOne({\n                            _id: dbUser._id\n                        }, {\n                            $set: {\n                                plan: defaultPlan,\n                                provider: token.provider || \"google\",\n                                updatedAt: new Date()\n                            }\n                        });\n                        dbUser.plan = defaultPlan;\n                        console.log(`Plan por defecto (${defaultPlan}) asignado al usuario ${email}`);\n                    }\n                    // Si el usuario no tiene proveedor, establecerlo\n                    if (!dbUser.provider) {\n                        const provider = token.provider || \"google\";\n                        await db.collection(\"users\").updateOne({\n                            _id: dbUser._id\n                        }, {\n                            $set: {\n                                provider: provider,\n                                updatedAt: new Date()\n                            }\n                        });\n                        dbUser.provider = provider;\n                        console.log(`Proveedor ${provider} asignado al usuario ${email}`);\n                    }\n                    // Actualizar el token con la información del plan\n                    token.plan = dbUser.plan || \"free\";\n                    token.provider = dbUser.provider || \"google\";\n                    // Actualizar la sesión con los datos del usuario\n                    session.user = {\n                        ...session.user,\n                        id: userId,\n                        plan: dbUser.plan || \"free\",\n                        provider: dbUser.provider || \"google\"\n                    };\n                    // Log para depuración\n                    console.log(\"Datos de sesi\\xf3n actualizados para el usuario:\", {\n                        email: session.user.email,\n                        plan: session.user.plan,\n                        provider: session.user.provider,\n                        id: session.user.id\n                    });\n                }\n                return session;\n            } catch (error) {\n                console.error(\"Error en el callback de sesi\\xf3n:\", error);\n                return session;\n            }\n        }\n    }\n};\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9hcHAvYXBpL2F1dGgvWy4uLm5leHRhdXRoXS9hdXRoLW9wdGlvbnMudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBQXVEO0FBRVc7QUFDVjtBQUNkO0FBQ1o7QUFnQzlCLGlDQUFpQztBQUNqQyxNQUFNSyxjQUFtQjtJQUN2QixpREFBaUQ7SUFDakRDLFdBQVc7UUFDVEosc0VBQWNBLENBQUM7WUFDYkssVUFBVUMsUUFBUUMsR0FBRyxDQUFDQyxnQkFBZ0IsSUFBSTtZQUMxQ0MsY0FBY0gsUUFBUUMsR0FBRyxDQUFDRyxvQkFBb0IsSUFBSTtZQUNsREMsbUNBQW1DO1FBQ3JDO1FBQ0FaLDJFQUFtQkEsQ0FBQztZQUNsQmEsSUFBSTtZQUNKQyxNQUFNO1lBQ05DLGFBQWE7Z0JBQ1hDLE9BQU87b0JBQUVDLE9BQU87b0JBQVNDLE1BQU07Z0JBQVE7Z0JBQ3ZDQyxVQUFVO29CQUFFRixPQUFPO29CQUFZQyxNQUFNO2dCQUFXO1lBQ2xEO1lBQ0EsTUFBTUUsV0FBVUwsV0FBVztnQkFDekIsSUFBSSxDQUFDQSxhQUFhQyxTQUFTLENBQUNELGFBQWFJLFVBQVU7b0JBQ2pELE1BQU0sSUFBSUUsTUFBTTtnQkFDbEI7Z0JBRUEsTUFBTSxFQUFFTCxLQUFLLEVBQUVHLFFBQVEsRUFBRSxHQUFHSjtnQkFFNUIsSUFBSTtvQkFDRixNQUFNTyxTQUFTLE1BQU1wQixvREFBYUE7b0JBQ2xDLE1BQU1xQixLQUFLRCxPQUFPQyxFQUFFO29CQUNwQixNQUFNQyxPQUFPLE1BQU1ELEdBQUdFLFVBQVUsQ0FBTyxTQUFTQyxPQUFPLENBQUM7d0JBQ3REVixPQUFPRCxZQUFZQyxLQUFLO29CQUMxQjtvQkFFQSxJQUFJLENBQUNRLE1BQU07d0JBQ1QsTUFBTSxJQUFJSCxNQUFNO29CQUNsQjtvQkFFQSxNQUFNTSxlQUFlSCxLQUFLTCxRQUFRO29CQUNsQyxJQUFJLE9BQU9RLGlCQUFpQixVQUFVO3dCQUNwQyxNQUFNLElBQUlOLE1BQU07b0JBQ2xCO29CQUVBLGlEQUFpRDtvQkFDakQsTUFBTU8sb0JBQW9CRCxhQUFhRSxRQUFRO29CQUMvQyxNQUFNQyxrQkFBa0JmLFlBQVlJLFFBQVEsQ0FBQ1UsUUFBUTtvQkFDckQseUNBQXlDO29CQUN6QyxJQUFJRSxrQkFBa0I7b0JBQ3RCLElBQUk7d0JBQ0ZBLGtCQUFrQixNQUFNNUIsd0RBQWMsQ0FBQzJCLGlCQUFpQkY7b0JBQzFELEVBQUUsT0FBT0ssS0FBSzt3QkFDWkMsUUFBUUMsS0FBSyxDQUFDLHFDQUFrQ0Y7d0JBQ2hELE1BQU0sSUFBSVosTUFBTTtvQkFDbEI7b0JBRUEsSUFBSSxDQUFDVSxpQkFBaUI7d0JBQ3BCLE1BQU0sSUFBSVYsTUFBTTtvQkFDbEI7b0JBRUEsMENBQTBDO29CQUMxQyxNQUFNLEVBQUVGLFFBQVEsRUFBRSxHQUFHaUIscUJBQXFCLEdBQUdaO29CQUM3QyxPQUFPO3dCQUNMWCxJQUFJVyxLQUFLYSxHQUFHLENBQUNSLFFBQVE7d0JBQ3JCYixPQUFPUSxLQUFLUixLQUFLO3dCQUNqQkYsTUFBTVUsS0FBS1YsSUFBSTt3QkFDZndCLE9BQU9kLEtBQUtjLEtBQUs7b0JBQ25CO2dCQUNGLEVBQUUsT0FBT0gsT0FBTztvQkFDZEQsUUFBUUMsS0FBSyxDQUFDLCtCQUErQkE7b0JBQzdDLE1BQU1BO2dCQUNSO1lBQ0Y7UUFDRjtLQUNEO0lBRUQsbUZBQW1GO0lBQ25GSSxTQUFTO1FBQ1AsR0FBR3hDLHFFQUFjQSxDQUFDRyxvREFBYUEsRUFBRTtZQUMvQnNDLGNBQWNqQyxRQUFRQyxHQUFHLENBQUNpQyxVQUFVO1FBQ3RDLEVBQUU7UUFDRixtRUFBbUU7UUFDbkUsTUFBTUMsWUFBV2xCLElBQWdIO1lBQy9ILE1BQU1GLFNBQVMsTUFBTXBCLG9EQUFhQTtZQUNsQyxNQUFNcUIsS0FBS0QsT0FBT0MsRUFBRTtZQUVwQix3REFBd0Q7WUFDeEQsTUFBTW9CLGVBQWVuQixLQUFLUixLQUFLLEVBQUU0QixNQUFNLElBQUksQ0FBQyxFQUFFLElBQUksQ0FBQyxJQUFJLEVBQUVDLEtBQUtDLEdBQUcsR0FBRyxDQUFDO1lBQ3JFLElBQUlDLFdBQVdKO1lBQ2YsSUFBSUssVUFBVTtZQUVkLDhDQUE4QztZQUM5QyxNQUFPLE1BQU16QixHQUFHRSxVQUFVLENBQUMsU0FBU0MsT0FBTyxDQUFDO2dCQUFFcUI7WUFBUyxHQUFJO2dCQUN6REEsV0FBVyxDQUFDLEVBQUVKLGFBQWEsRUFBRUssUUFBUSxDQUFDO2dCQUN0Q0E7WUFDRjtZQUVBLGtEQUFrRDtZQUNsRCxNQUFNQyxVQUFVO2dCQUNkLEdBQUd6QixJQUFJO2dCQUNQdUI7Z0JBQ0FHLE1BQU07Z0JBQ05DLFVBQVU7Z0JBQ1ZDLGVBQWU1QixLQUFLNEIsYUFBYSxJQUFJLElBQUlQO2dCQUN6Q1EsV0FBVyxJQUFJUjtnQkFDZlMsV0FBVyxJQUFJVDtZQUNqQjtZQUVBLE1BQU1VLFNBQVMsTUFBTWhDLEdBQUdFLFVBQVUsQ0FBQyxTQUFTK0IsU0FBUyxDQUFDUDtZQUN0RCxPQUFPO2dCQUNMLEdBQUdBLE9BQU87Z0JBQ1ZwQyxJQUFJMEMsT0FBT0UsVUFBVSxDQUFDNUIsUUFBUTtZQUNoQztRQUNGO0lBQ0Y7SUFFQSx3QkFBd0I7SUFDeEI2QixTQUFTO1FBQ1BDLFVBQVU7SUFDWjtJQUVBLG9CQUFvQjtJQUNwQkMsS0FBSztRQUNIQyxRQUFRLEtBQUssS0FBSyxLQUFLO0lBQ3pCO0lBRUFDLFFBQVF2RCw4Q0FBMkI7SUFFbkMsc0JBQXNCO0lBQ3RCeUQsT0FBTztRQUNMQyxRQUFRO1FBQ1I5QixPQUFPO0lBQ1Q7SUFFQSxrRUFBa0U7SUFDbEUrQixPQUFPM0Qsa0JBQXlCO0lBRWhDLFVBQVU7SUFDVjRELFFBQVE7UUFDTixNQUFNekIsWUFBVyxFQUFFbEIsSUFBSSxFQUFFNEMsT0FBTyxFQUFFQyxPQUFPLEVBQUVDLFNBQVMsRUFLbkQ7WUFDQyx1RkFBdUY7WUFDdkYsbURBQW1EO1lBQ25EO1FBQ0Y7UUFFQSxNQUFNTCxRQUFPLEVBQUV6QyxJQUFJLEVBQUU0QyxPQUFPLEVBQUVDLE9BQU8sRUFBRUMsU0FBUyxFQUsvQztZQUNDLGtFQUFrRTtZQUNsRSxJQUFJQSxhQUFhRixTQUFTakIsVUFBVTtnQkFDbENqQixRQUFRcUMsR0FBRyxDQUFDLENBQUMseUJBQXlCLEVBQUVILFFBQVFqQixRQUFRLENBQUMsQ0FBQztZQUM1RDtZQUNBLE9BQU87UUFDVDtRQUVBLE1BQU1oQixPQUFNQSxLQUFZO1lBQ3RCRCxRQUFRQyxLQUFLLENBQUMsOEJBQTJCQTtRQUMzQztJQUNGO0lBRUEsWUFBWTtJQUNacUMsV0FBVztRQUNULE1BQU1QLFFBQU8sRUFBRXpDLElBQUksRUFBRTRDLE9BQU8sRUFBRUMsT0FBTyxFQUFFckQsS0FBSyxFQUFFRCxXQUFXLEVBTXhEO1lBQ0MsMERBQTBEO1lBQzFELElBQUlDLE9BQU95RCxxQkFBcUIsT0FBTztZQUV2QyxvRUFBb0U7WUFDcEUsSUFBSSxDQUFDTCxTQUFTakIsWUFBWWlCLFFBQVFqQixRQUFRLEtBQUssZUFBZSxPQUFPO1lBQ3JFLElBQUk7Z0JBQ0YsdUNBQXVDO2dCQUN2QyxJQUFJaUIsU0FBU2pCLFlBQVlpQixRQUFRakIsUUFBUSxLQUFLLGVBQWU7b0JBQzNELE1BQU03QixTQUFTLE1BQU1wQixvREFBYUE7b0JBQ2xDLE1BQU1xQixLQUFLRCxPQUFPQyxFQUFFO29CQUVwQixvQ0FBb0M7b0JBQ3BDLE1BQU1tRCxlQUFlLE1BQU1uRCxHQUFHRSxVQUFVLENBQUMsU0FBU0MsT0FBTyxDQUFDO3dCQUFFVixPQUFPUSxLQUFLUixLQUFLO29CQUFDO29CQUU5RSxJQUFJMEQsY0FBYzt3QkFDaEIsa0RBQWtEO3dCQUNsRCxNQUFNbkQsR0FBR0UsVUFBVSxDQUFDLFNBQVNrRCxTQUFTLENBQ3BDOzRCQUFFM0QsT0FBT1EsS0FBS1IsS0FBSzt3QkFBQyxHQUNwQjs0QkFDRTRELE1BQU07Z0NBQ0o5RCxNQUFNVSxLQUFLVixJQUFJO2dDQUNmd0IsT0FBTytCLFNBQVNRLFdBQVdyRCxLQUFLYyxLQUFLO2dDQUNyQ2EsVUFBVWlCLFFBQVFqQixRQUFRO2dDQUMxQkcsV0FBVyxJQUFJVDs0QkFDakI7d0JBQ0Y7b0JBRUosT0FBTzt3QkFDTCxzQ0FBc0M7d0JBQ3RDLE1BQU10QixHQUFHRSxVQUFVLENBQUMsU0FBUytCLFNBQVMsQ0FBQzs0QkFDckN4QyxPQUFPUSxLQUFLUixLQUFLOzRCQUNqQkYsTUFBTVUsS0FBS1YsSUFBSTs0QkFDZndCLE9BQU8rQixTQUFTUSxXQUFXckQsS0FBS2MsS0FBSzs0QkFDckNjLGVBQWUsSUFBSVA7NEJBQ25CSyxNQUFNOzRCQUNOQyxVQUFVaUIsUUFBUWpCLFFBQVE7NEJBQzFCRSxXQUFXLElBQUlSOzRCQUNmUyxXQUFXLElBQUlUO3dCQUNqQjtvQkFDRjtnQkFDRjtnQkFFQSxPQUFPO1lBQ1QsRUFBRSxPQUFPVixPQUFPO2dCQUNkRCxRQUFRQyxLQUFLLENBQUMsbUNBQW1DQTtnQkFDakQsT0FBTztZQUNUO1FBQ0Y7UUFDQSxNQUFNeUIsS0FBSSxFQUFFa0IsS0FBSyxFQUFFdEQsSUFBSSxFQUFFNEMsT0FBTyxFQUE2QztZQUMzRSxrQ0FBa0M7WUFDbEMsSUFBSTVDLE1BQU07Z0JBQ1JzRCxNQUFNakUsRUFBRSxHQUFHVyxLQUFLWCxFQUFFO2dCQUNsQmlFLE1BQU0zQixRQUFRLEdBQUdpQixTQUFTakI7WUFDNUI7WUFDQSxPQUFPMkI7UUFDVDtRQUNBLE1BQU1wQixTQUFRLEVBQUVBLE9BQU8sRUFBRW9CLEtBQUssRUFBRXRELElBQUksRUFBZ0Q7WUFDbEYsSUFBSTtnQkFDRiw2REFBNkQ7Z0JBQzdELElBQUksQ0FBQ2tDLFNBQVNsQyxNQUFNUixPQUFPO29CQUN6QmtCLFFBQVE2QyxJQUFJLENBQUM7b0JBQ2IsT0FBT3JCO2dCQUNUO2dCQUVBLE1BQU1wQyxTQUFTLE1BQU1wQixvREFBYUE7Z0JBQ2xDLE1BQU1xQixLQUFLRCxPQUFPQyxFQUFFLENBQUNoQixRQUFRQyxHQUFHLENBQUNpQyxVQUFVLElBQUk7Z0JBRS9DLGdEQUFnRDtnQkFDaEQsTUFBTXpCLFFBQVEwQyxRQUFRbEMsSUFBSSxDQUFDUixLQUFLLENBQUNnRSxXQUFXO2dCQUU1QywwREFBMEQ7Z0JBQzFELE1BQU1DLFNBQVMsTUFBTTFELEdBQUdFLFVBQVUsQ0FBQyxTQUFTQyxPQUFPLENBQUM7b0JBQUVWO2dCQUFNO2dCQUU1RCxJQUFJLENBQUNpRSxRQUFRO29CQUNYL0MsUUFBUTZDLElBQUksQ0FBQyxDQUFDLGtCQUFrQixFQUFFL0QsTUFBTSxrQ0FBa0MsQ0FBQztvQkFDM0UsT0FBTzBDO2dCQUNUO2dCQUVBLHlDQUF5QztnQkFDekMsTUFBTXdCLFNBQVNELE9BQU81QyxHQUFHLEVBQUVSLGNBQWNpRCxNQUFNakUsRUFBRSxJQUFJVyxNQUFNWCxNQUFNO2dCQUVqRSxxREFBcUQ7Z0JBQ3JELElBQUk2QyxRQUFRbEMsSUFBSSxFQUFFO29CQUNoQmtDLFFBQVFsQyxJQUFJLENBQUNYLEVBQUUsR0FBR3FFO29CQUVsQiwwREFBMEQ7b0JBQzFELElBQUlELE9BQU8vQixJQUFJLEtBQUtpQyxhQUFhRixPQUFPL0IsSUFBSSxLQUFLLE1BQU07d0JBQ3JELE1BQU1rQyxjQUFjO3dCQUNwQixNQUFNN0QsR0FBR0UsVUFBVSxDQUFDLFNBQVNrRCxTQUFTLENBQ3BDOzRCQUFFdEMsS0FBSzRDLE9BQU81QyxHQUFHO3dCQUFDLEdBQ2xCOzRCQUNFdUMsTUFBTTtnQ0FDSjFCLE1BQU1rQztnQ0FDTmpDLFVBQVUyQixNQUFNM0IsUUFBUSxJQUFJO2dDQUM1QkcsV0FBVyxJQUFJVDs0QkFDakI7d0JBQ0Y7d0JBRUZvQyxPQUFPL0IsSUFBSSxHQUFHa0M7d0JBQ2RsRCxRQUFRcUMsR0FBRyxDQUFDLENBQUMsa0JBQWtCLEVBQUVhLFlBQVksc0JBQXNCLEVBQUVwRSxNQUFNLENBQUM7b0JBQzlFO29CQUVBLGlEQUFpRDtvQkFDakQsSUFBSSxDQUFDaUUsT0FBTzlCLFFBQVEsRUFBRTt3QkFDcEIsTUFBTUEsV0FBVzJCLE1BQU0zQixRQUFRLElBQUk7d0JBQ25DLE1BQU01QixHQUFHRSxVQUFVLENBQUMsU0FBU2tELFNBQVMsQ0FDcEM7NEJBQUV0QyxLQUFLNEMsT0FBTzVDLEdBQUc7d0JBQUMsR0FDbEI7NEJBQ0V1QyxNQUFNO2dDQUNKekIsVUFBVUE7Z0NBQ1ZHLFdBQVcsSUFBSVQ7NEJBQ2pCO3dCQUNGO3dCQUVGb0MsT0FBTzlCLFFBQVEsR0FBR0E7d0JBQ2xCakIsUUFBUXFDLEdBQUcsQ0FBQyxDQUFDLFVBQVUsRUFBRXBCLFNBQVMscUJBQXFCLEVBQUVuQyxNQUFNLENBQUM7b0JBQ2xFO29CQUVBLGtEQUFrRDtvQkFDbEQ4RCxNQUFNNUIsSUFBSSxHQUFHK0IsT0FBTy9CLElBQUksSUFBSTtvQkFDNUI0QixNQUFNM0IsUUFBUSxHQUFHOEIsT0FBTzlCLFFBQVEsSUFBSTtvQkFFcEMsaURBQWlEO29CQUNqRE8sUUFBUWxDLElBQUksR0FBRzt3QkFDYixHQUFHa0MsUUFBUWxDLElBQUk7d0JBQ2ZYLElBQUlxRTt3QkFDSmhDLE1BQU0rQixPQUFPL0IsSUFBSSxJQUFJO3dCQUNyQkMsVUFBVThCLE9BQU85QixRQUFRLElBQUk7b0JBQy9CO29CQUVBLHNCQUFzQjtvQkFDdEJqQixRQUFRcUMsR0FBRyxDQUFDLG9EQUFpRDt3QkFDM0R2RCxPQUFPMEMsUUFBUWxDLElBQUksQ0FBQ1IsS0FBSzt3QkFDekJrQyxNQUFNUSxRQUFRbEMsSUFBSSxDQUFDMEIsSUFBSTt3QkFDdkJDLFVBQVVPLFFBQVFsQyxJQUFJLENBQUMyQixRQUFRO3dCQUMvQnRDLElBQUk2QyxRQUFRbEMsSUFBSSxDQUFDWCxFQUFFO29CQUNyQjtnQkFDRjtnQkFFQSxPQUFPNkM7WUFDVCxFQUFFLE9BQU92QixPQUFPO2dCQUNkRCxRQUFRQyxLQUFLLENBQUMsc0NBQW1DQTtnQkFDakQsT0FBT3VCO1lBQ1Q7UUFDRjtJQUNGO0FBQ0Y7QUFFdUIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zcG90aWZ5LWNsb25lLy4vYXBwL2FwaS9hdXRoL1suLi5uZXh0YXV0aF0vYXV0aC1vcHRpb25zLnRzPzEyNjciXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTW9uZ29EQkFkYXB0ZXIgfSBmcm9tICdAYXV0aC9tb25nb2RiLWFkYXB0ZXInO1xuaW1wb3J0IE5leHRBdXRoIGZyb20gJ25leHQtYXV0aCc7XG5pbXBvcnQgQ3JlZGVudGlhbHNQcm92aWRlciBmcm9tICduZXh0LWF1dGgvcHJvdmlkZXJzL2NyZWRlbnRpYWxzJztcbmltcG9ydCBHb29nbGVQcm92aWRlciBmcm9tICduZXh0LWF1dGgvcHJvdmlkZXJzL2dvb2dsZSc7XG5pbXBvcnQgY2xpZW50UHJvbWlzZSBmcm9tICdAL2xpYi9tb25nb2RiJztcbmltcG9ydCBiY3J5cHQgZnJvbSAnYmNyeXB0anMnO1xuaW1wb3J0IHR5cGUgeyBBZGFwdGVyIH0gZnJvbSAnbmV4dC1hdXRoL2FkYXB0ZXJzJztcblxuLy8gSW1wb3J0YXIgbG9zIHRpcG9zIGRlIE5leHRBdXRoXG5pbXBvcnQgdHlwZSB7IERlZmF1bHRVc2VyLCBEZWZhdWx0U2Vzc2lvbiB9IGZyb20gJ25leHQtYXV0aCc7XG5pbXBvcnQgdHlwZSB7IEpXVCBhcyBEZWZhdWx0SldUIH0gZnJvbSAnbmV4dC1hdXRoL2p3dCc7XG5cbi8vIFRpcG9zIHBhcmEgdXNhciBlbiBlc3RlIGFyY2hpdm9cbnR5cGUgVXNlciA9IERlZmF1bHRVc2VyICYge1xuICBpZDogc3RyaW5nO1xuICBwbGFuPzogc3RyaW5nO1xuICBwcm92aWRlcj86IHN0cmluZztcbiAgcGFzc3dvcmQ/OiBzdHJpbmc7XG59O1xuXG50eXBlIFNlc3Npb24gPSBEZWZhdWx0U2Vzc2lvbiAmIHtcbiAgdXNlcjoge1xuICAgIGlkOiBzdHJpbmc7XG4gICAgbmFtZT86IHN0cmluZyB8IG51bGw7XG4gICAgZW1haWw/OiBzdHJpbmcgfCBudWxsO1xuICAgIGltYWdlPzogc3RyaW5nIHwgbnVsbDtcbiAgICBwbGFuPzogc3RyaW5nO1xuICAgIHByb3ZpZGVyPzogc3RyaW5nO1xuICB9O1xufTtcblxudHlwZSBKV1QgPSBEZWZhdWx0SldUICYge1xuICBpZDogc3RyaW5nO1xuICBwbGFuPzogc3RyaW5nO1xuICBwcm92aWRlcj86IHN0cmluZztcbn07XG5cbi8vIENvbmZpZ3VyYWNpw7NuIGRlIGF1dGVudGljYWNpw7NuXG5jb25zdCBhdXRoT3B0aW9uczogYW55ID0ge1xuICAvLyBDb25maWd1cmUgb25lIG9yIG1vcmUgYXV0aGVudGljYXRpb24gcHJvdmlkZXJzXG4gIHByb3ZpZGVyczogW1xuICAgIEdvb2dsZVByb3ZpZGVyKHtcbiAgICAgIGNsaWVudElkOiBwcm9jZXNzLmVudi5HT09HTEVfQ0xJRU5UX0lEIHx8ICcnLFxuICAgICAgY2xpZW50U2VjcmV0OiBwcm9jZXNzLmVudi5HT09HTEVfQ0xJRU5UX1NFQ1JFVCB8fCAnJyxcbiAgICAgIGFsbG93RGFuZ2Vyb3VzRW1haWxBY2NvdW50TGlua2luZzogdHJ1ZSxcbiAgICB9KSxcbiAgICBDcmVkZW50aWFsc1Byb3ZpZGVyKHtcbiAgICAgIGlkOiAnY3JlZGVudGlhbHMnLFxuICAgICAgbmFtZTogJ0NyZWRlbnRpYWxzJyxcbiAgICAgIGNyZWRlbnRpYWxzOiB7XG4gICAgICAgIGVtYWlsOiB7IGxhYmVsOiAnRW1haWwnLCB0eXBlOiAnZW1haWwnIH0sXG4gICAgICAgIHBhc3N3b3JkOiB7IGxhYmVsOiAnUGFzc3dvcmQnLCB0eXBlOiAncGFzc3dvcmQnIH1cbiAgICAgIH0gYXMgY29uc3QsXG4gICAgICBhc3luYyBhdXRob3JpemUoY3JlZGVudGlhbHMpIHtcbiAgICAgICAgaWYgKCFjcmVkZW50aWFscz8uZW1haWwgfHwgIWNyZWRlbnRpYWxzPy5wYXNzd29yZCkge1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUG9yIGZhdm9yIGluZ3Jlc2EgdHUgY29ycmVvIHkgY29udHJhc2XDsWEnKTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgY29uc3QgeyBlbWFpbCwgcGFzc3dvcmQgfSA9IGNyZWRlbnRpYWxzIGFzIHsgZW1haWw6IHN0cmluZzsgcGFzc3dvcmQ6IHN0cmluZyB9O1xuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgY29uc3QgY2xpZW50ID0gYXdhaXQgY2xpZW50UHJvbWlzZTtcbiAgICAgICAgICBjb25zdCBkYiA9IGNsaWVudC5kYigpO1xuICAgICAgICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBkYi5jb2xsZWN0aW9uPFVzZXI+KCd1c2VycycpLmZpbmRPbmUoeyBcbiAgICAgICAgICAgIGVtYWlsOiBjcmVkZW50aWFscy5lbWFpbCBcbiAgICAgICAgICB9KTtcblxuICAgICAgICAgIGlmICghdXNlcikge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdObyBleGlzdGUgdW4gdXN1YXJpbyBjb24gZXN0ZSBjb3JyZW8nKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBjb25zdCB1c2VyUGFzc3dvcmQgPSB1c2VyLnBhc3N3b3JkO1xuICAgICAgICAgIGlmICh0eXBlb2YgdXNlclBhc3N3b3JkICE9PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdDb250cmFzZcOxYSBubyB2w6FsaWRhJyk7XG4gICAgICAgICAgfVxuICAgICAgICAgIFxuICAgICAgICAgIC8vIEFzZWd1cmFyc2UgZGUgcXVlIGxhIGNvbnRyYXNlw7FhIHNlYSB1bmEgY2FkZW5hXG4gICAgICAgICAgY29uc3QgcGFzc3dvcmRUb0NvbXBhcmUgPSB1c2VyUGFzc3dvcmQudG9TdHJpbmcoKTtcbiAgICAgICAgICBjb25zdCBwYXNzd29yZFRvQ2hlY2sgPSBjcmVkZW50aWFscy5wYXNzd29yZC50b1N0cmluZygpO1xuICAgICAgICAgIC8vIFVzYXIgbGEgdmVyc2nDs24gY29uIHByb21lc2FzIGRlIGJjcnlwdFxuICAgICAgICAgIGxldCBpc1Bhc3N3b3JkVmFsaWQgPSBmYWxzZTtcbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgaXNQYXNzd29yZFZhbGlkID0gYXdhaXQgYmNyeXB0LmNvbXBhcmUocGFzc3dvcmRUb0NoZWNrLCBwYXNzd29yZFRvQ29tcGFyZSk7XG4gICAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBhbCBjb21wYXJhciBjb250cmFzZcOxYXM6JywgZXJyKTtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignRXJyb3IgYWwgdmVyaWZpY2FyIGxhIGNvbnRyYXNlw7FhJyk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKCFpc1Bhc3N3b3JkVmFsaWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignQ29udHJhc2XDsWEgaW5jb3JyZWN0YScpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vIFJldHVybiB1c2VyIG9iamVjdCB3aXRob3V0IHRoZSBwYXNzd29yZFxuICAgICAgICAgIGNvbnN0IHsgcGFzc3dvcmQsIC4uLnVzZXJXaXRob3V0UGFzc3dvcmQgfSA9IHVzZXIgYXMgYW55O1xuICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBpZDogdXNlci5faWQudG9TdHJpbmcoKSxcbiAgICAgICAgICAgIGVtYWlsOiB1c2VyLmVtYWlsLFxuICAgICAgICAgICAgbmFtZTogdXNlci5uYW1lLFxuICAgICAgICAgICAgaW1hZ2U6IHVzZXIuaW1hZ2VcbiAgICAgICAgICB9O1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGR1cmluZyBhdXRob3JpemF0aW9uOicsIGVycm9yKTtcbiAgICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICB9KSxcbiAgXSxcbiAgXG4gIC8vIENvbmZpZ3VyYWNpw7NuIGRlbCBhZGFwdGFkb3IgZGUgTW9uZ29EQiBwYXJhIE5leHRBdXRoIHY0IGNvbiBtYW5lam8gcGVyc29uYWxpemFkb1xuICBhZGFwdGVyOiB7XG4gICAgLi4uTW9uZ29EQkFkYXB0ZXIoY2xpZW50UHJvbWlzZSwge1xuICAgICAgZGF0YWJhc2VOYW1lOiBwcm9jZXNzLmVudi5NT05HT0RCX0RCLFxuICAgIH0pLFxuICAgIC8vIFNvYnJlc2NyaWJpciBlbCBtw6l0b2RvIGNyZWF0ZVVzZXIgcGFyYSBtYW5lamFyIGVsIGNhbXBvIHVzZXJuYW1lXG4gICAgYXN5bmMgY3JlYXRlVXNlcih1c2VyOiBVc2VyICYgeyBlbWFpbD86IHN0cmluZyB8IG51bGw7IGVtYWlsVmVyaWZpZWQ/OiBEYXRlIHwgbnVsbDsgbmFtZT86IHN0cmluZyB8IG51bGw7IGltYWdlPzogc3RyaW5nIHwgbnVsbCB9KSB7XG4gICAgICBjb25zdCBjbGllbnQgPSBhd2FpdCBjbGllbnRQcm9taXNlO1xuICAgICAgY29uc3QgZGIgPSBjbGllbnQuZGIoKTtcbiAgICAgIFxuICAgICAgLy8gR2VuZXJhciB1biBub21icmUgZGUgdXN1YXJpbyDDum5pY28gYmFzYWRvIGVuIGVsIGVtYWlsXG4gICAgICBjb25zdCBiYXNlVXNlcm5hbWUgPSB1c2VyLmVtYWlsPy5zcGxpdCgnQCcpWzBdIHx8IGB1c2VyJHtEYXRlLm5vdygpfWA7XG4gICAgICBsZXQgdXNlcm5hbWUgPSBiYXNlVXNlcm5hbWU7XG4gICAgICBsZXQgY291bnRlciA9IDE7XG4gICAgICBcbiAgICAgIC8vIFZlcmlmaWNhciBzaSBlbCBub21icmUgZGUgdXN1YXJpbyB5YSBleGlzdGVcbiAgICAgIHdoaWxlIChhd2FpdCBkYi5jb2xsZWN0aW9uKCd1c2VycycpLmZpbmRPbmUoeyB1c2VybmFtZSB9KSkge1xuICAgICAgICB1c2VybmFtZSA9IGAke2Jhc2VVc2VybmFtZX0ke2NvdW50ZXJ9YDtcbiAgICAgICAgY291bnRlcisrO1xuICAgICAgfVxuICAgICAgXG4gICAgICAvLyBDcmVhciBlbCB1c3VhcmlvIGNvbiB1biBub21icmUgZGUgdXN1YXJpbyDDum5pY29cbiAgICAgIGNvbnN0IG5ld1VzZXIgPSB7XG4gICAgICAgIC4uLnVzZXIsXG4gICAgICAgIHVzZXJuYW1lLFxuICAgICAgICBwbGFuOiAnZnJlZScsXG4gICAgICAgIHByb3ZpZGVyOiAnZ29vZ2xlJyxcbiAgICAgICAgZW1haWxWZXJpZmllZDogdXNlci5lbWFpbFZlcmlmaWVkIHx8IG5ldyBEYXRlKCksXG4gICAgICAgIGNyZWF0ZWRBdDogbmV3IERhdGUoKSxcbiAgICAgICAgdXBkYXRlZEF0OiBuZXcgRGF0ZSgpLFxuICAgICAgfTtcbiAgICAgIFxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZGIuY29sbGVjdGlvbigndXNlcnMnKS5pbnNlcnRPbmUobmV3VXNlcik7XG4gICAgICByZXR1cm4ge1xuICAgICAgICAuLi5uZXdVc2VyLFxuICAgICAgICBpZDogcmVzdWx0Lmluc2VydGVkSWQudG9TdHJpbmcoKSxcbiAgICAgIH07XG4gICAgfSxcbiAgfSxcbiAgXG4gIC8vIFNlc3Npb24gY29uZmlndXJhdGlvblxuICBzZXNzaW9uOiB7XG4gICAgc3RyYXRlZ3k6ICdqd3QnLFxuICB9LFxuICBcbiAgLy8gSldUIGNvbmZpZ3VyYXRpb25cbiAgand0OiB7XG4gICAgbWF4QWdlOiAzMCAqIDI0ICogNjAgKiA2MCwgLy8gMzAgZGF5c1xuICB9LFxuICBcbiAgc2VjcmV0OiBwcm9jZXNzLmVudi5ORVhUQVVUSF9TRUNSRVQsXG4gIFxuICAvLyBQYWdlcyBjb25maWd1cmF0aW9uXG4gIHBhZ2VzOiB7XG4gICAgc2lnbkluOiAnL2F1dGgvc2lnbmluJyxcbiAgICBlcnJvcjogJy9hdXRoL3NpZ25pbicsXG4gIH0sXG4gIFxuICAvLyBFbmFibGUgZGVidWcgbWVzc2FnZXMgaW4gdGhlIGNvbnNvbGUgaWYgeW91IGFyZSBoYXZpbmcgcHJvYmxlbXNcbiAgZGVidWc6IHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAnZGV2ZWxvcG1lbnQnLFxuICBcbiAgLy8gRXZlbnRvc1xuICBldmVudHM6IHtcbiAgICBhc3luYyBjcmVhdGVVc2VyKHsgdXNlciwgYWNjb3VudCwgcHJvZmlsZSwgaXNOZXdVc2VyIH06IHsgXG4gICAgICB1c2VyOiBVc2VyICYgeyBlbWFpbFZlcmlmaWVkPzogRGF0ZSB8IG51bGwgfTtcbiAgICAgIGFjY291bnQ6IGFueTtcbiAgICAgIHByb2ZpbGU/OiBhbnk7XG4gICAgICBpc05ld1VzZXI/OiBib29sZWFuO1xuICAgIH0pIHtcbiAgICAgIC8vIEVzdGUgZXZlbnRvIHlhIG5vIGVzIG5lY2VzYXJpbyB5YSBxdWUgbWFuZWphbW9zIGxhIGNyZWFjacOzbiBlbiBlbCBjYWxsYmFjayBkZSBzaWduSW5cbiAgICAgIC8vIFNlIG1hbnRpZW5lIHBvciBjb21wYXRpYmlsaWRhZCBwZXJvIG5vIGhhY2UgbmFkYVxuICAgICAgcmV0dXJuO1xuICAgIH0sXG4gICAgXG4gICAgYXN5bmMgc2lnbkluKHsgdXNlciwgYWNjb3VudCwgcHJvZmlsZSwgaXNOZXdVc2VyIH06IHsgXG4gICAgICB1c2VyOiBVc2VyO1xuICAgICAgYWNjb3VudDogYW55O1xuICAgICAgcHJvZmlsZT86IGFueTtcbiAgICAgIGlzTmV3VXNlcj86IGJvb2xlYW47XG4gICAgfSkge1xuICAgICAgLy8gRXN0ZSBjYWxsYmFjayBzZSBlamVjdXRhIGRlc3B1w6lzIGRlIHVuIGluaWNpbyBkZSBzZXNpw7NuIGV4aXRvc29cbiAgICAgIGlmIChpc05ld1VzZXIgJiYgYWNjb3VudD8ucHJvdmlkZXIpIHtcbiAgICAgICAgY29uc29sZS5sb2coYE51ZXZvIHVzdWFyaW8gY3JlYWRvIGNvbiAke2FjY291bnQucHJvdmlkZXJ9YCk7XG4gICAgICB9XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9LFxuICAgIFxuICAgIGFzeW5jIGVycm9yKGVycm9yOiBFcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZGUgYXV0ZW50aWNhY2nDs246JywgZXJyb3IpO1xuICAgIH1cbiAgfSxcbiAgXG4gIC8vIENhbGxiYWNrc1xuICBjYWxsYmFja3M6IHtcbiAgICBhc3luYyBzaWduSW4oeyB1c2VyLCBhY2NvdW50LCBwcm9maWxlLCBlbWFpbCwgY3JlZGVudGlhbHMgfTogeyBcbiAgICAgIHVzZXI6IFVzZXI7XG4gICAgICBhY2NvdW50OiBhbnk7XG4gICAgICBwcm9maWxlPzogYW55O1xuICAgICAgZW1haWw/OiB7IHZlcmlmaWNhdGlvblJlcXVlc3Q/OiBib29sZWFuIH07XG4gICAgICBjcmVkZW50aWFscz86IFJlY29yZDxzdHJpbmcsIGFueT47XG4gICAgfSkge1xuICAgICAgLy8gU2kgZXMgdW5hIHNvbGljaXR1ZCBkZSB2ZXJpZmljYWNpw7NuIGRlIGNvcnJlbywgcGVybWl0aXJcbiAgICAgIGlmIChlbWFpbD8udmVyaWZpY2F0aW9uUmVxdWVzdCkgcmV0dXJuIHRydWU7XG4gICAgICBcbiAgICAgIC8vIFNpIG5vIGVzIHVuIHByb3ZlZWRvciBPQXV0aCwgcGVybWl0aXIgKG1hbmVqYWRvIHBvciBlbCBhZGFwdGFkb3IpXG4gICAgICBpZiAoIWFjY291bnQ/LnByb3ZpZGVyIHx8IGFjY291bnQucHJvdmlkZXIgPT09ICdjcmVkZW50aWFscycpIHJldHVybiB0cnVlO1xuICAgICAgdHJ5IHtcbiAgICAgICAgLy8gU29sbyBwcm9jZXNhciBwYXJhIHByb3ZlZWRvcmVzIE9BdXRoXG4gICAgICAgIGlmIChhY2NvdW50Py5wcm92aWRlciAmJiBhY2NvdW50LnByb3ZpZGVyICE9PSAnY3JlZGVudGlhbHMnKSB7XG4gICAgICAgICAgY29uc3QgY2xpZW50ID0gYXdhaXQgY2xpZW50UHJvbWlzZTtcbiAgICAgICAgICBjb25zdCBkYiA9IGNsaWVudC5kYigpO1xuICAgICAgICAgIFxuICAgICAgICAgIC8vIFZlcmlmaWNhciBzaSBlbCB1c3VhcmlvIHlhIGV4aXN0ZVxuICAgICAgICAgIGNvbnN0IGV4aXN0aW5nVXNlciA9IGF3YWl0IGRiLmNvbGxlY3Rpb24oJ3VzZXJzJykuZmluZE9uZSh7IGVtYWlsOiB1c2VyLmVtYWlsIH0pO1xuICAgICAgICAgIFxuICAgICAgICAgIGlmIChleGlzdGluZ1VzZXIpIHtcbiAgICAgICAgICAgIC8vIEFjdHVhbGl6YXIgbGEgaW5mb3JtYWNpw7NuIGRlbCB1c3VhcmlvIGV4aXN0ZW50ZVxuICAgICAgICAgICAgYXdhaXQgZGIuY29sbGVjdGlvbigndXNlcnMnKS51cGRhdGVPbmUoXG4gICAgICAgICAgICAgIHsgZW1haWw6IHVzZXIuZW1haWwgfSxcbiAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICRzZXQ6IHtcbiAgICAgICAgICAgICAgICAgIG5hbWU6IHVzZXIubmFtZSxcbiAgICAgICAgICAgICAgICAgIGltYWdlOiBwcm9maWxlPy5waWN0dXJlIHx8IHVzZXIuaW1hZ2UsXG4gICAgICAgICAgICAgICAgICBwcm92aWRlcjogYWNjb3VudC5wcm92aWRlcixcbiAgICAgICAgICAgICAgICAgIHVwZGF0ZWRBdDogbmV3IERhdGUoKSxcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIENyZWFyIHVuIG51ZXZvIHVzdWFyaW8gc2kgbm8gZXhpc3RlXG4gICAgICAgICAgICBhd2FpdCBkYi5jb2xsZWN0aW9uKCd1c2VycycpLmluc2VydE9uZSh7XG4gICAgICAgICAgICAgIGVtYWlsOiB1c2VyLmVtYWlsLFxuICAgICAgICAgICAgICBuYW1lOiB1c2VyLm5hbWUsXG4gICAgICAgICAgICAgIGltYWdlOiBwcm9maWxlPy5waWN0dXJlIHx8IHVzZXIuaW1hZ2UsXG4gICAgICAgICAgICAgIGVtYWlsVmVyaWZpZWQ6IG5ldyBEYXRlKCksXG4gICAgICAgICAgICAgIHBsYW46ICdmcmVlJyxcbiAgICAgICAgICAgICAgcHJvdmlkZXI6IGFjY291bnQucHJvdmlkZXIsXG4gICAgICAgICAgICAgIGNyZWF0ZWRBdDogbmV3IERhdGUoKSxcbiAgICAgICAgICAgICAgdXBkYXRlZEF0OiBuZXcgRGF0ZSgpLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGVuIGVsIGNhbGxiYWNrIGRlIHNpZ25JbjonLCBlcnJvcik7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICB9LFxuICAgIGFzeW5jIGp3dCh7IHRva2VuLCB1c2VyLCBhY2NvdW50IH06IHsgdG9rZW46IGFueTsgdXNlcj86IGFueTsgYWNjb3VudD86IGFueSB9KSB7XG4gICAgICAvLyBQYXNhciBlbCBJRCBkZSB1c3VhcmlvIGFsIHRva2VuXG4gICAgICBpZiAodXNlcikge1xuICAgICAgICB0b2tlbi5pZCA9IHVzZXIuaWQ7XG4gICAgICAgIHRva2VuLnByb3ZpZGVyID0gYWNjb3VudD8ucHJvdmlkZXI7XG4gICAgICB9XG4gICAgICByZXR1cm4gdG9rZW47XG4gICAgfSxcbiAgICBhc3luYyBzZXNzaW9uKHsgc2Vzc2lvbiwgdG9rZW4sIHVzZXIgfTogeyBzZXNzaW9uOiBTZXNzaW9uOyB0b2tlbjogSldUOyB1c2VyPzogYW55IH0pIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIC8vIFZlcmlmaWNhciBxdWUgZXhpc3RhIGVsIHVzdWFyaW8gZW4gbGEgc2VzacOzbiB5IHRlbmdhIGVtYWlsXG4gICAgICAgIGlmICghc2Vzc2lvbj8udXNlcj8uZW1haWwpIHtcbiAgICAgICAgICBjb25zb2xlLndhcm4oJ05vIHNlIGVuY29udHLDsyBlbCBjb3JyZW8gZWxlY3Ryw7NuaWNvIGVuIGxhIHNlc2nDs24nKTtcbiAgICAgICAgICByZXR1cm4gc2Vzc2lvbjtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgY29uc3QgY2xpZW50ID0gYXdhaXQgY2xpZW50UHJvbWlzZTtcbiAgICAgICAgY29uc3QgZGIgPSBjbGllbnQuZGIocHJvY2Vzcy5lbnYuTU9OR09EQl9EQiB8fCAnJyk7XG4gICAgICAgIFxuICAgICAgICAvLyBOb3JtYWxpemFyIGVsIGNvcnJlbyBlbGVjdHLDs25pY28gYSBtaW7DunNjdWxhc1xuICAgICAgICBjb25zdCBlbWFpbCA9IHNlc3Npb24udXNlci5lbWFpbC50b0xvd2VyQ2FzZSgpO1xuICAgICAgICBcbiAgICAgICAgLy8gQnVzY2FyIGVsIHVzdWFyaW8gcG9yIGVtYWlsIGVuIGxhIGNvbGVjY2nDs24gZGUgdXN1YXJpb3NcbiAgICAgICAgY29uc3QgZGJVc2VyID0gYXdhaXQgZGIuY29sbGVjdGlvbigndXNlcnMnKS5maW5kT25lKHsgZW1haWwgfSk7XG4gICAgICAgIFxuICAgICAgICBpZiAoIWRiVXNlcikge1xuICAgICAgICAgIGNvbnNvbGUud2FybihgVXN1YXJpbyBjb24gZW1haWwgJHtlbWFpbH0gbm8gZW5jb250cmFkbyBlbiBsYSBiYXNlIGRlIGRhdG9zYCk7XG4gICAgICAgICAgcmV0dXJuIHNlc3Npb247XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8vIEFzZWd1cmFyc2UgZGUgcXVlIGVsIElEIHNlYSB1bmEgY2FkZW5hXG4gICAgICAgIGNvbnN0IHVzZXJJZCA9IGRiVXNlci5faWQ/LnRvU3RyaW5nKCkgfHwgdG9rZW4uaWQgfHwgdXNlcj8uaWQgfHwgJyc7XG4gICAgICAgIFxuICAgICAgICAvLyBBY3R1YWxpemFyIGxhIGluZm9ybWFjacOzbiBkZWwgdXN1YXJpbyBlbiBsYSBzZXNpw7NuXG4gICAgICAgIGlmIChzZXNzaW9uLnVzZXIpIHtcbiAgICAgICAgICBzZXNzaW9uLnVzZXIuaWQgPSB1c2VySWQ7XG4gICAgICAgICAgXG4gICAgICAgICAgLy8gU2kgZWwgdXN1YXJpbyBubyB0aWVuZSBwbGFuLCBlc3RhYmxlY2VyIHVubyBwb3IgZGVmZWN0b1xuICAgICAgICAgIGlmIChkYlVzZXIucGxhbiA9PT0gdW5kZWZpbmVkIHx8IGRiVXNlci5wbGFuID09PSBudWxsKSB7XG4gICAgICAgICAgICBjb25zdCBkZWZhdWx0UGxhbiA9ICdmcmVlJztcbiAgICAgICAgICAgIGF3YWl0IGRiLmNvbGxlY3Rpb24oJ3VzZXJzJykudXBkYXRlT25lKFxuICAgICAgICAgICAgICB7IF9pZDogZGJVc2VyLl9pZCB9LFxuICAgICAgICAgICAgICB7IFxuICAgICAgICAgICAgICAgICRzZXQ6IHsgXG4gICAgICAgICAgICAgICAgICBwbGFuOiBkZWZhdWx0UGxhbiwgXG4gICAgICAgICAgICAgICAgICBwcm92aWRlcjogdG9rZW4ucHJvdmlkZXIgfHwgJ2dvb2dsZScsXG4gICAgICAgICAgICAgICAgICB1cGRhdGVkQXQ6IG5ldyBEYXRlKCkgXG4gICAgICAgICAgICAgICAgfSBcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIGRiVXNlci5wbGFuID0gZGVmYXVsdFBsYW47XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhgUGxhbiBwb3IgZGVmZWN0byAoJHtkZWZhdWx0UGxhbn0pIGFzaWduYWRvIGFsIHVzdWFyaW8gJHtlbWFpbH1gKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgXG4gICAgICAgICAgLy8gU2kgZWwgdXN1YXJpbyBubyB0aWVuZSBwcm92ZWVkb3IsIGVzdGFibGVjZXJsb1xuICAgICAgICAgIGlmICghZGJVc2VyLnByb3ZpZGVyKSB7XG4gICAgICAgICAgICBjb25zdCBwcm92aWRlciA9IHRva2VuLnByb3ZpZGVyIHx8ICdnb29nbGUnO1xuICAgICAgICAgICAgYXdhaXQgZGIuY29sbGVjdGlvbigndXNlcnMnKS51cGRhdGVPbmUoXG4gICAgICAgICAgICAgIHsgX2lkOiBkYlVzZXIuX2lkIH0sXG4gICAgICAgICAgICAgIHsgXG4gICAgICAgICAgICAgICAgJHNldDogeyBcbiAgICAgICAgICAgICAgICAgIHByb3ZpZGVyOiBwcm92aWRlcixcbiAgICAgICAgICAgICAgICAgIHVwZGF0ZWRBdDogbmV3IERhdGUoKVxuICAgICAgICAgICAgICAgIH0gXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICBkYlVzZXIucHJvdmlkZXIgPSBwcm92aWRlcjtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGBQcm92ZWVkb3IgJHtwcm92aWRlcn0gYXNpZ25hZG8gYWwgdXN1YXJpbyAke2VtYWlsfWApO1xuICAgICAgICAgIH1cbiAgICAgICAgICBcbiAgICAgICAgICAvLyBBY3R1YWxpemFyIGVsIHRva2VuIGNvbiBsYSBpbmZvcm1hY2nDs24gZGVsIHBsYW5cbiAgICAgICAgICB0b2tlbi5wbGFuID0gZGJVc2VyLnBsYW4gfHwgJ2ZyZWUnO1xuICAgICAgICAgIHRva2VuLnByb3ZpZGVyID0gZGJVc2VyLnByb3ZpZGVyIHx8ICdnb29nbGUnO1xuICAgICAgICAgIFxuICAgICAgICAgIC8vIEFjdHVhbGl6YXIgbGEgc2VzacOzbiBjb24gbG9zIGRhdG9zIGRlbCB1c3VhcmlvXG4gICAgICAgICAgc2Vzc2lvbi51c2VyID0ge1xuICAgICAgICAgICAgLi4uc2Vzc2lvbi51c2VyLFxuICAgICAgICAgICAgaWQ6IHVzZXJJZCxcbiAgICAgICAgICAgIHBsYW46IGRiVXNlci5wbGFuIHx8ICdmcmVlJyxcbiAgICAgICAgICAgIHByb3ZpZGVyOiBkYlVzZXIucHJvdmlkZXIgfHwgJ2dvb2dsZScsXG4gICAgICAgICAgfTtcbiAgICAgICAgICBcbiAgICAgICAgICAvLyBMb2cgcGFyYSBkZXB1cmFjacOzblxuICAgICAgICAgIGNvbnNvbGUubG9nKCdEYXRvcyBkZSBzZXNpw7NuIGFjdHVhbGl6YWRvcyBwYXJhIGVsIHVzdWFyaW86Jywge1xuICAgICAgICAgICAgZW1haWw6IHNlc3Npb24udXNlci5lbWFpbCxcbiAgICAgICAgICAgIHBsYW46IHNlc3Npb24udXNlci5wbGFuLFxuICAgICAgICAgICAgcHJvdmlkZXI6IHNlc3Npb24udXNlci5wcm92aWRlcixcbiAgICAgICAgICAgIGlkOiBzZXNzaW9uLnVzZXIuaWRcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgcmV0dXJuIHNlc3Npb247XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBlbiBlbCBjYWxsYmFjayBkZSBzZXNpw7NuOicsIGVycm9yKTtcbiAgICAgICAgcmV0dXJuIHNlc3Npb247XG4gICAgICB9XG4gICAgfSxcbiAgfSxcbn07XG5cbmV4cG9ydCB7IGF1dGhPcHRpb25zIH07XG4iXSwibmFtZXMiOlsiTW9uZ29EQkFkYXB0ZXIiLCJDcmVkZW50aWFsc1Byb3ZpZGVyIiwiR29vZ2xlUHJvdmlkZXIiLCJjbGllbnRQcm9taXNlIiwiYmNyeXB0IiwiYXV0aE9wdGlvbnMiLCJwcm92aWRlcnMiLCJjbGllbnRJZCIsInByb2Nlc3MiLCJlbnYiLCJHT09HTEVfQ0xJRU5UX0lEIiwiY2xpZW50U2VjcmV0IiwiR09PR0xFX0NMSUVOVF9TRUNSRVQiLCJhbGxvd0Rhbmdlcm91c0VtYWlsQWNjb3VudExpbmtpbmciLCJpZCIsIm5hbWUiLCJjcmVkZW50aWFscyIsImVtYWlsIiwibGFiZWwiLCJ0eXBlIiwicGFzc3dvcmQiLCJhdXRob3JpemUiLCJFcnJvciIsImNsaWVudCIsImRiIiwidXNlciIsImNvbGxlY3Rpb24iLCJmaW5kT25lIiwidXNlclBhc3N3b3JkIiwicGFzc3dvcmRUb0NvbXBhcmUiLCJ0b1N0cmluZyIsInBhc3N3b3JkVG9DaGVjayIsImlzUGFzc3dvcmRWYWxpZCIsImNvbXBhcmUiLCJlcnIiLCJjb25zb2xlIiwiZXJyb3IiLCJ1c2VyV2l0aG91dFBhc3N3b3JkIiwiX2lkIiwiaW1hZ2UiLCJhZGFwdGVyIiwiZGF0YWJhc2VOYW1lIiwiTU9OR09EQl9EQiIsImNyZWF0ZVVzZXIiLCJiYXNlVXNlcm5hbWUiLCJzcGxpdCIsIkRhdGUiLCJub3ciLCJ1c2VybmFtZSIsImNvdW50ZXIiLCJuZXdVc2VyIiwicGxhbiIsInByb3ZpZGVyIiwiZW1haWxWZXJpZmllZCIsImNyZWF0ZWRBdCIsInVwZGF0ZWRBdCIsInJlc3VsdCIsImluc2VydE9uZSIsImluc2VydGVkSWQiLCJzZXNzaW9uIiwic3RyYXRlZ3kiLCJqd3QiLCJtYXhBZ2UiLCJzZWNyZXQiLCJORVhUQVVUSF9TRUNSRVQiLCJwYWdlcyIsInNpZ25JbiIsImRlYnVnIiwiZXZlbnRzIiwiYWNjb3VudCIsInByb2ZpbGUiLCJpc05ld1VzZXIiLCJsb2ciLCJjYWxsYmFja3MiLCJ2ZXJpZmljYXRpb25SZXF1ZXN0IiwiZXhpc3RpbmdVc2VyIiwidXBkYXRlT25lIiwiJHNldCIsInBpY3R1cmUiLCJ0b2tlbiIsIndhcm4iLCJ0b0xvd2VyQ2FzZSIsImRiVXNlciIsInVzZXJJZCIsInVuZGVmaW5lZCIsImRlZmF1bHRQbGFuIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./app/api/auth/[...nextauth]/auth-options.ts\n");

/***/ }),

/***/ "(rsc)/./app/api/auth/[...nextauth]/route.ts":
/*!*********************************************!*\
  !*** ./app/api/auth/[...nextauth]/route.ts ***!
  \*********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ handler),\n/* harmony export */   POST: () => (/* binding */ handler)\n/* harmony export */ });\n/* harmony import */ var next_auth__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next-auth */ \"(rsc)/./node_modules/next-auth/index.js\");\n/* harmony import */ var next_auth__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_auth__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _auth_options__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./auth-options */ \"(rsc)/./app/api/auth/[...nextauth]/auth-options.ts\");\n\n\n// Manejador de autenticación\nconst handler = next_auth__WEBPACK_IMPORTED_MODULE_0___default()({\n    ..._auth_options__WEBPACK_IMPORTED_MODULE_1__.authOptions,\n    callbacks: {\n        ..._auth_options__WEBPACK_IMPORTED_MODULE_1__.authOptions.callbacks,\n        async signIn ({ account }) {\n            // Permitir el inicio de sesión con Google sin verificación adicional\n            if (account?.provider === \"google\") {\n                return true;\n            }\n            // Para credenciales, ya se maneja en la función authorize\n            return true;\n        },\n        async redirect ({ url, baseUrl }) {\n            // Si la URL es relativa, agregar la URL base\n            if (url.startsWith(\"/\")) return `${baseUrl}${url}`;\n            // Si la URL es absoluta y del mismo origen, permitirla\n            try {\n                if (new URL(url).origin === baseUrl) return url;\n            } catch (e) {\n                // Si hay un error al analizar la URL, devolver la URL base\n                return baseUrl;\n            }\n            // Por defecto, devolver la URL base\n            return baseUrl;\n        }\n    }\n});\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9hcHAvYXBpL2F1dGgvWy4uLm5leHRhdXRoXS9yb3V0ZS50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUFpQztBQUNZO0FBRTdDLDZCQUE2QjtBQUM3QixNQUFNRSxVQUFVRixnREFBUUEsQ0FBQztJQUN2QixHQUFHQyxzREFBVztJQUNkRSxXQUFXO1FBQ1QsR0FBR0Ysc0RBQVdBLENBQUNFLFNBQVM7UUFDeEIsTUFBTUMsUUFBTyxFQUFFQyxPQUFPLEVBQUU7WUFDdEIscUVBQXFFO1lBQ3JFLElBQUlBLFNBQVNDLGFBQWEsVUFBVTtnQkFDbEMsT0FBTztZQUNUO1lBQ0EsMERBQTBEO1lBQzFELE9BQU87UUFDVDtRQUNBLE1BQU1DLFVBQVMsRUFBRUMsR0FBRyxFQUFFQyxPQUFPLEVBQUU7WUFDN0IsNkNBQTZDO1lBQzdDLElBQUlELElBQUlFLFVBQVUsQ0FBQyxNQUFNLE9BQU8sQ0FBQyxFQUFFRCxRQUFRLEVBQUVELElBQUksQ0FBQztZQUNsRCx1REFBdUQ7WUFDdkQsSUFBSTtnQkFDRixJQUFJLElBQUlHLElBQUlILEtBQUtJLE1BQU0sS0FBS0gsU0FBUyxPQUFPRDtZQUM5QyxFQUFFLE9BQU9LLEdBQUc7Z0JBQ1YsMkRBQTJEO2dCQUMzRCxPQUFPSjtZQUNUO1lBQ0Esb0NBQW9DO1lBQ3BDLE9BQU9BO1FBQ1Q7SUFDRjtBQUNGO0FBRTJDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vc3BvdGlmeS1jbG9uZS8uL2FwcC9hcGkvYXV0aC9bLi4ubmV4dGF1dGhdL3JvdXRlLnRzP2M4YTQiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IE5leHRBdXRoIGZyb20gJ25leHQtYXV0aCc7XG5pbXBvcnQgeyBhdXRoT3B0aW9ucyB9IGZyb20gJy4vYXV0aC1vcHRpb25zJztcblxuLy8gTWFuZWphZG9yIGRlIGF1dGVudGljYWNpw7NuXG5jb25zdCBoYW5kbGVyID0gTmV4dEF1dGgoe1xuICAuLi5hdXRoT3B0aW9ucyxcbiAgY2FsbGJhY2tzOiB7XG4gICAgLi4uYXV0aE9wdGlvbnMuY2FsbGJhY2tzLFxuICAgIGFzeW5jIHNpZ25Jbih7IGFjY291bnQgfSkge1xuICAgICAgLy8gUGVybWl0aXIgZWwgaW5pY2lvIGRlIHNlc2nDs24gY29uIEdvb2dsZSBzaW4gdmVyaWZpY2FjacOzbiBhZGljaW9uYWxcbiAgICAgIGlmIChhY2NvdW50Py5wcm92aWRlciA9PT0gJ2dvb2dsZScpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG4gICAgICAvLyBQYXJhIGNyZWRlbmNpYWxlcywgeWEgc2UgbWFuZWphIGVuIGxhIGZ1bmNpw7NuIGF1dGhvcml6ZVxuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfSxcbiAgICBhc3luYyByZWRpcmVjdCh7IHVybCwgYmFzZVVybCB9KSB7XG4gICAgICAvLyBTaSBsYSBVUkwgZXMgcmVsYXRpdmEsIGFncmVnYXIgbGEgVVJMIGJhc2VcbiAgICAgIGlmICh1cmwuc3RhcnRzV2l0aCgnLycpKSByZXR1cm4gYCR7YmFzZVVybH0ke3VybH1gO1xuICAgICAgLy8gU2kgbGEgVVJMIGVzIGFic29sdXRhIHkgZGVsIG1pc21vIG9yaWdlbiwgcGVybWl0aXJsYVxuICAgICAgdHJ5IHtcbiAgICAgICAgaWYgKG5ldyBVUkwodXJsKS5vcmlnaW4gPT09IGJhc2VVcmwpIHJldHVybiB1cmw7XG4gICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIC8vIFNpIGhheSB1biBlcnJvciBhbCBhbmFsaXphciBsYSBVUkwsIGRldm9sdmVyIGxhIFVSTCBiYXNlXG4gICAgICAgIHJldHVybiBiYXNlVXJsO1xuICAgICAgfVxuICAgICAgLy8gUG9yIGRlZmVjdG8sIGRldm9sdmVyIGxhIFVSTCBiYXNlXG4gICAgICByZXR1cm4gYmFzZVVybDtcbiAgICB9LFxuICB9LFxufSk7XG5cbmV4cG9ydCB7IGhhbmRsZXIgYXMgR0VULCBoYW5kbGVyIGFzIFBPU1QgfTtcbiJdLCJuYW1lcyI6WyJOZXh0QXV0aCIsImF1dGhPcHRpb25zIiwiaGFuZGxlciIsImNhbGxiYWNrcyIsInNpZ25JbiIsImFjY291bnQiLCJwcm92aWRlciIsInJlZGlyZWN0IiwidXJsIiwiYmFzZVVybCIsInN0YXJ0c1dpdGgiLCJVUkwiLCJvcmlnaW4iLCJlIiwiR0VUIiwiUE9TVCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./app/api/auth/[...nextauth]/route.ts\n");

/***/ }),

/***/ "(rsc)/./lib/mongodb.ts":
/*!************************!*\
  !*** ./lib/mongodb.ts ***!
  \************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var mongodb__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mongodb */ \"mongodb\");\n/* harmony import */ var mongodb__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(mongodb__WEBPACK_IMPORTED_MODULE_0__);\n\nif (!process.env.MONGODB_URI) {\n    throw new Error(\"Please add your MongoDB connection string to .env.local\");\n}\nconst uri = process.env.MONGODB_URI;\nconst options = {};\nlet client;\nlet clientPromise;\nif (true) {\n    // In development mode, use a global variable so that the value\n    // is preserved across module reloads caused by HMR (Hot Module Replacement).\n    if (!global._mongoClientPromise) {\n        client = new mongodb__WEBPACK_IMPORTED_MODULE_0__.MongoClient(uri, options);\n        global._mongoClientPromise = client.connect();\n    }\n    clientPromise = global._mongoClientPromise;\n} else {}\n// Export a module-scoped MongoClient promise. By doing this in a\n// separate module, the client can be shared across functions.\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (clientPromise);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvbW9uZ29kYi50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBMEQ7QUFFMUQsSUFBSSxDQUFDQyxRQUFRQyxHQUFHLENBQUNDLFdBQVcsRUFBRTtJQUM1QixNQUFNLElBQUlDLE1BQU07QUFDbEI7QUFFQSxNQUFNQyxNQUFNSixRQUFRQyxHQUFHLENBQUNDLFdBQVc7QUFDbkMsTUFBTUcsVUFBOEIsQ0FBQztBQUVyQyxJQUFJQztBQUNKLElBQUlDO0FBT0osSUFBSVAsSUFBeUIsRUFBZTtJQUMxQywrREFBK0Q7SUFDL0QsNkVBQTZFO0lBQzdFLElBQUksQ0FBQ1EsT0FBT0MsbUJBQW1CLEVBQUU7UUFDL0JILFNBQVMsSUFBSVAsZ0RBQVdBLENBQUNLLEtBQUtDO1FBQzlCRyxPQUFPQyxtQkFBbUIsR0FBR0gsT0FBT0ksT0FBTztJQUM3QztJQUNBSCxnQkFBZ0JDLE9BQU9DLG1CQUFtQjtBQUM1QyxPQUFPLEVBSU47QUFFRCxpRUFBaUU7QUFDakUsOERBQThEO0FBQzlELGlFQUFlRixhQUFhQSxFQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vc3BvdGlmeS1jbG9uZS8uL2xpYi9tb25nb2RiLnRzPzA1YmQiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTW9uZ29DbGllbnQsIE1vbmdvQ2xpZW50T3B0aW9ucyB9IGZyb20gJ21vbmdvZGInO1xuXG5pZiAoIXByb2Nlc3MuZW52Lk1PTkdPREJfVVJJKSB7XG4gIHRocm93IG5ldyBFcnJvcignUGxlYXNlIGFkZCB5b3VyIE1vbmdvREIgY29ubmVjdGlvbiBzdHJpbmcgdG8gLmVudi5sb2NhbCcpO1xufVxuXG5jb25zdCB1cmkgPSBwcm9jZXNzLmVudi5NT05HT0RCX1VSSTtcbmNvbnN0IG9wdGlvbnM6IE1vbmdvQ2xpZW50T3B0aW9ucyA9IHt9O1xuXG5sZXQgY2xpZW50OiBNb25nb0NsaWVudDtcbmxldCBjbGllbnRQcm9taXNlOiBQcm9taXNlPE1vbmdvQ2xpZW50PjtcblxuZGVjbGFyZSBnbG9iYWwge1xuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tdmFyXG4gIHZhciBfbW9uZ29DbGllbnRQcm9taXNlOiBQcm9taXNlPE1vbmdvQ2xpZW50PiB8IHVuZGVmaW5lZDtcbn1cblxuaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAnZGV2ZWxvcG1lbnQnKSB7XG4gIC8vIEluIGRldmVsb3BtZW50IG1vZGUsIHVzZSBhIGdsb2JhbCB2YXJpYWJsZSBzbyB0aGF0IHRoZSB2YWx1ZVxuICAvLyBpcyBwcmVzZXJ2ZWQgYWNyb3NzIG1vZHVsZSByZWxvYWRzIGNhdXNlZCBieSBITVIgKEhvdCBNb2R1bGUgUmVwbGFjZW1lbnQpLlxuICBpZiAoIWdsb2JhbC5fbW9uZ29DbGllbnRQcm9taXNlKSB7XG4gICAgY2xpZW50ID0gbmV3IE1vbmdvQ2xpZW50KHVyaSwgb3B0aW9ucyk7XG4gICAgZ2xvYmFsLl9tb25nb0NsaWVudFByb21pc2UgPSBjbGllbnQuY29ubmVjdCgpO1xuICB9XG4gIGNsaWVudFByb21pc2UgPSBnbG9iYWwuX21vbmdvQ2xpZW50UHJvbWlzZTtcbn0gZWxzZSB7XG4gIC8vIEluIHByb2R1Y3Rpb24gbW9kZSwgaXQncyBiZXN0IHRvIG5vdCB1c2UgYSBnbG9iYWwgdmFyaWFibGUuXG4gIGNsaWVudCA9IG5ldyBNb25nb0NsaWVudCh1cmksIG9wdGlvbnMpO1xuICBjbGllbnRQcm9taXNlID0gY2xpZW50LmNvbm5lY3QoKTtcbn1cblxuLy8gRXhwb3J0IGEgbW9kdWxlLXNjb3BlZCBNb25nb0NsaWVudCBwcm9taXNlLiBCeSBkb2luZyB0aGlzIGluIGFcbi8vIHNlcGFyYXRlIG1vZHVsZSwgdGhlIGNsaWVudCBjYW4gYmUgc2hhcmVkIGFjcm9zcyBmdW5jdGlvbnMuXG5leHBvcnQgZGVmYXVsdCBjbGllbnRQcm9taXNlO1xuIl0sIm5hbWVzIjpbIk1vbmdvQ2xpZW50IiwicHJvY2VzcyIsImVudiIsIk1PTkdPREJfVVJJIiwiRXJyb3IiLCJ1cmkiLCJvcHRpb25zIiwiY2xpZW50IiwiY2xpZW50UHJvbWlzZSIsImdsb2JhbCIsIl9tb25nb0NsaWVudFByb21pc2UiLCJjb25uZWN0Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./lib/mongodb.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/next-auth","vendor-chunks/@babel","vendor-chunks/openid-client","vendor-chunks/uuid","vendor-chunks/oauth","vendor-chunks/@panva","vendor-chunks/yallist","vendor-chunks/preact-render-to-string","vendor-chunks/oidc-token-hash","vendor-chunks/bcryptjs","vendor-chunks/@auth","vendor-chunks/preact","vendor-chunks/object-hash","vendor-chunks/lru-cache"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fauth%2F%5B...nextauth%5D%2Froute&page=%2Fapi%2Fauth%2F%5B...nextauth%5D%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fauth%2F%5B...nextauth%5D%2Froute.ts&appDir=%2FUsers%2Fmikeblackhat%2FSpotify-clone%20v06%2Ffrontend%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fmikeblackhat%2FSpotify-clone%20v06%2Ffrontend&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();